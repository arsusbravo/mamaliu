import{d as Y,v as Z,j as g,c as p,x as ue,b as r,a as t,f as _,u as e,w as s,g as o,H as T,t as f,o as u,l as de,B as me,h as fe,e as S,T as ce,I as pe,K as ve,F as z,r as J,i as j}from"./app-F71W3IWx.js";import{_ as ge}from"./AppLayout.vue_vue_type_script_setup_true_lang-ClxwRMFP.js";import{c as _e,_ as w}from"./index-D1eryRv_.js";import{_ as D,a as H}from"./Label.vue_vue_type_script_setup_true_lang-C7r0Q67h.js";import{_ as ye}from"./Textarea.vue_vue_type_script_setup_true_lang-BlRs3wfa.js";import{_ as be,a as xe,b as we,c as $e,d as K}from"./SelectValue.vue_vue_type_script_setup_true_lang--z2W_2ik.js";import{_ as he,a as Q,b as ke,c as h}from"./TableCell.vue_vue_type_script_setup_true_lang-D-Py_N7S.js";import{_ as Me}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Cmj1qXvT.js";import{X as Se}from"./x-BNGqyaPi.js";import{_ as I,a as N,b as F,c as L,d as P}from"./DialogTitle.vue_vue_type_script_setup_true_lang-VQkbTkLe.js";import{_ as Ce,a as Ve,b as Ue,c as q,d as A}from"./Toast.vue_vue_type_script_setup_true_lang-oFFLJcEY.js";import{S as De}from"./search-DjoyzKYY.js";import{I as Te}from"./image-off-CWWv2AZH.js";import"./Presence-CliERWfr.js";import"./VisuallyHidden-DX_akton.js";import"./index-B8We5vQ-.js";import"./shopping-bag-DyVpL47T.js";import"./check-1rCUdIyk.js";import"./useFormControl-9n8BqYk4.js";const je=_e("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Ie={class:"grid gap-4"},Ne={class:"grid gap-2"},Fe={key:0,class:"text-sm text-red-500"},Le={class:"grid gap-2"},Pe={key:0,class:"text-sm text-red-500"},Ae={class:"grid gap-2"},Be={key:0,class:"text-sm text-red-500"},Ee={class:"grid gap-2"},ze={key:0,class:"text-sm text-red-500"},qe={class:"grid gap-2"},He={key:0,class:"space-y-2"},Oe={class:"relative w-full max-w-md rounded-lg overflow-hidden border"},Ge=["src"],Re={class:"flex items-center justify-center w-full"},Xe={for:"image",class:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800"},Je={class:"flex flex-col items-center justify-center pt-5 pb-6"},Ke={class:"mb-2 text-sm text-gray-500"},Qe={class:"font-semibold"},We={key:1,class:"text-sm text-red-500"},W=Y({__name:"FormMenu",props:{menu:{},submitUrl:{},method:{}},emits:["success"],setup(m,{emit:b}){const v=m,B=b,n=Z({label:v.menu.label||"",description:v.menu.description||"",price:v.menu.price||0,menutype:v.menu.menutype||"normal",image:null,delete_image:!1}),x=g(v.menu.image_url||null),C=g(v.menu.has_image),k=y=>{const d=y.target.files?.[0];d&&(n.image=d,n.delete_image=!1,x.value=URL.createObjectURL(d))},M=()=>{n.image=null,x.value=null,v.method==="put"&&C.value&&(n.delete_image=!0);const y=document.getElementById("image");y&&(y.value="")},$=()=>{const y=(v.method==="post","post"),a=v.method==="put"?`${v.submitUrl}?_method=PUT`:v.submitUrl;n[y](a,{onSuccess:()=>{B("success"),n.reset(),x.value=null}})};return(y,a)=>(u(),p("form",{onSubmit:ue($,["prevent"]),class:"space-y-4"},[r("div",Ie,[r("div",Ne,[t(e(D),{for:"label"},{default:s(()=>[...a[4]||(a[4]=[o("Label *",-1)])]),_:1}),t(e(H),{id:"label",modelValue:e(n).label,"onUpdate:modelValue":a[0]||(a[0]=d=>e(n).label=d),type:"text",required:"",class:T({"border-red-500":e(n).errors.label})},null,8,["modelValue","class"]),e(n).errors.label?(u(),p("span",Fe,f(e(n).errors.label),1)):_("",!0)]),r("div",Le,[t(e(D),{for:"description"},{default:s(()=>[...a[5]||(a[5]=[o("Description",-1)])]),_:1}),t(e(ye),{id:"description",modelValue:e(n).description,"onUpdate:modelValue":a[1]||(a[1]=d=>e(n).description=d),rows:"3",class:T({"border-red-500":e(n).errors.description})},null,8,["modelValue","class"]),e(n).errors.description?(u(),p("span",Pe,f(e(n).errors.description),1)):_("",!0)]),r("div",Ae,[t(e(D),{for:"price"},{default:s(()=>[...a[6]||(a[6]=[o("Price (€) *",-1)])]),_:1}),t(e(H),{id:"price",modelValue:e(n).price,"onUpdate:modelValue":a[2]||(a[2]=d=>e(n).price=d),type:"number",step:"0.01",min:"0",required:"",class:T({"border-red-500":e(n).errors.price})},null,8,["modelValue","class"]),e(n).errors.price?(u(),p("span",Be,f(e(n).errors.price),1)):_("",!0)]),r("div",Ee,[t(e(D),{for:"menutype"},{default:s(()=>[...a[7]||(a[7]=[o("Menu Type *",-1)])]),_:1}),t(e(be),{modelValue:e(n).menutype,"onUpdate:modelValue":a[3]||(a[3]=d=>e(n).menutype=d),required:""},{default:s(()=>[t(e(xe),{id:"menutype",class:T({"border-red-500":e(n).errors.menutype})},{default:s(()=>[t(e(we),{placeholder:"Select menu type"})]),_:1},8,["class"]),t(e($e),null,{default:s(()=>[t(e(K),{value:"normal"},{default:s(()=>[...a[8]||(a[8]=[o("Normal",-1)])]),_:1}),t(e(K),{value:"menuset"},{default:s(()=>[...a[9]||(a[9]=[o("Menu Set",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(n).errors.menutype?(u(),p("span",ze,f(e(n).errors.menutype),1)):_("",!0)]),r("div",qe,[t(e(D),{for:"image"},{default:s(()=>[...a[10]||(a[10]=[o("Image",-1)])]),_:1}),x.value?(u(),p("div",He,[r("div",Oe,[r("img",{src:x.value,alt:"Preview",class:"w-full h-auto object-cover"},null,8,Ge),r("button",{type:"button",onClick:M,class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-2 hover:bg-red-600 shadow-lg"},[t(e(Se),{class:"h-4 w-4"})])]),a[11]||(a[11]=r("p",{class:"text-xs text-muted-foreground"},"Click the X button to remove or upload a new image to replace",-1))])):_("",!0),r("div",Re,[r("label",Xe,[r("div",Je,[t(e(je),{class:"w-8 h-8 mb-2 text-gray-500"}),r("p",Ke,[r("span",Qe,"Click to "+f(x.value?"replace":"upload"),1),a[12]||(a[12]=o(" or drag and drop ",-1))]),a[13]||(a[13]=r("p",{class:"text-xs text-gray-500"},"JPG, PNG up to 5MB (will be resized to fit 800x600)",-1))]),r("input",{id:"image",type:"file",class:"hidden",accept:"image/jpeg,image/jpg,image/png",onChange:k},null,32)])]),e(n).errors.image?(u(),p("span",We,f(e(n).errors.image),1)):_("",!0)])]),t(e(Me),{class:"gap-2"},{default:s(()=>[t(e(he),{"as-child":""},{default:s(()=>[t(e(w),{type:"button",variant:"secondary"},{default:s(()=>[...a[14]||(a[14]=[o(" Cancel ",-1)])]),_:1})]),_:1}),t(e(w),{type:"submit",disabled:e(n).processing},{default:s(()=>[o(f(m.method==="post"?"Create Menu":"Update Menu"),1)]),_:1},8,["disabled"])]),_:1})],32))}}),Ye={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},Ze={class:"flex items-center justify-between"},et={class:"flex gap-4"},tt={class:"relative flex-1 max-w-sm"},st={class:"rounded-md border"},lt=["onClick"],at=["src","alt"],nt={key:1,class:"w-16 h-16 rounded bg-gray-100 flex items-center justify-center"},ot={class:"flex justify-end gap-2"},rt={key:0,class:"flex items-center justify-between"},it={class:"text-sm text-muted-foreground"},ut={class:"flex gap-2"},dt={class:"flex items-center justify-center"},mt=["src","alt"],ft={class:"flex justify-end gap-2 mt-6"},jt=Y({__name:"Index",props:{menus:{default:()=>({data:[],current_page:1,last_page:1,per_page:10,total:0,links:[]})},filters:{default:()=>({search:"",menutype:"",sort:"created_at",direction:"desc"})}},setup(m){const b=m,v=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Menu's",href:"/admin/menus"}],B=de(),n=g(!1),x=g(""),C=g("success"),k=g(!1),M=g(!1),$=g(!1),y=g(!1),a=g(null),d=g(null),V=g(b.filters?.search||""),U=g(b.filters?.menutype||"");let O;const ee={id:0,label:null,description:null,price:null,menutype:"normal",image_url:null,has_image:!1},G=Z({}),te=()=>{k.value=!0},se=c=>{a.value=c,M.value=!0},le=c=>{a.value=c,$.value=!0},ae=c=>{d.value=c,y.value=!0},R=()=>{k.value=!1,M.value=!1},ne=()=>{a.value&&G.delete(`/admin/menus/${a.value.id}`,{onSuccess:()=>{$.value=!1}})},oe=c=>{c&&j.visit(c)},re=()=>{clearTimeout(O),O=setTimeout(()=>{j.get("/admin/menus",{search:V.value,menutype:U.value,sort:b.filters?.sort,direction:b.filters?.direction},{preserveState:!0,preserveScroll:!0})},300)},ie=()=>{j.get("/admin/menus",{search:V.value,menutype:U.value,sort:b.filters?.sort,direction:b.filters?.direction},{preserveState:!0,preserveScroll:!0})},X=c=>{let l="asc";b.filters?.sort===c&&b.filters?.direction==="asc"&&(l="desc"),j.get("/admin/menus",{search:V.value,menutype:U.value,sort:c,direction:l},{preserveState:!0,preserveScroll:!0})};return me(()=>B.props.flash,c=>{c?.success&&(C.value="success",x.value=c.success,n.value=!0,setTimeout(()=>{n.value=!1},3e3)),c?.error&&(C.value="destructive",x.value=c.error,n.value=!0,setTimeout(()=>{n.value=!1},3e3))},{deep:!0}),(c,l)=>(u(),p(z,null,[t(e(fe),{title:"Menus"}),t(ce,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:s(()=>[n.value?(u(),S(Ce,{key:0,variant:C.value,position:"top-right"},{default:s(()=>[o(f(x.value),1)]),_:1},8,["variant"])):_("",!0)]),_:1}),t(ge,{breadcrumbs:v},{default:s(()=>[r("div",Ye,[r("div",Ze,[l[8]||(l[8]=r("h2",{class:"text-2xl font-bold"},"Menu List",-1)),t(e(w),{onClick:te},{default:s(()=>[...l[7]||(l[7]=[o("Add Menu",-1)])]),_:1})]),r("div",et,[r("div",tt,[t(e(De),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(H),{modelValue:V.value,"onUpdate:modelValue":l[0]||(l[0]=i=>V.value=i),onInput:re,type:"search",placeholder:"Search menus...",class:"pl-9"},null,8,["modelValue"])]),pe(r("select",{"onUpdate:modelValue":l[1]||(l[1]=i=>U.value=i),onChange:ie,class:"h-10 w-[180px] rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...l[9]||(l[9]=[r("option",{value:""},"All Types",-1),r("option",{value:"normal"},"Normal",-1),r("option",{value:"menuset"},"Menu Set",-1)])],544),[[ve,U.value]])]),r("div",st,[t(e(Ve),null,{default:s(()=>[t(e(Ue),null,{default:s(()=>[t(e(q),null,{default:s(()=>[t(e(A),{class:"w-20"},{default:s(()=>[...l[10]||(l[10]=[o("Image",-1)])]),_:1}),t(e(Q),{"sort-key":"label","current-sort":m.filters?.sort,"current-direction":m.filters?.direction,onSort:X},{default:s(()=>[...l[11]||(l[11]=[o(" Label ",-1)])]),_:1},8,["current-sort","current-direction"]),t(e(A),null,{default:s(()=>[...l[12]||(l[12]=[o("Description",-1)])]),_:1}),t(e(Q),{"sort-key":"price","current-sort":m.filters?.sort,"current-direction":m.filters?.direction,onSort:X},{default:s(()=>[...l[13]||(l[13]=[o(" Price ",-1)])]),_:1},8,["current-sort","current-direction"]),t(e(A),null,{default:s(()=>[...l[14]||(l[14]=[o("Type",-1)])]),_:1}),t(e(A),{class:"text-right"},{default:s(()=>[...l[15]||(l[15]=[o("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(e(ke),null,{default:s(()=>[m.menus.data.length===0?(u(),S(e(q),{key:0},{default:s(()=>[t(e(h),{colspan:"6",class:"text-center text-muted-foreground"},{default:s(()=>[...l[16]||(l[16]=[o(" No menus found. Add your first menu to get started. ",-1)])]),_:1})]),_:1})):_("",!0),(u(!0),p(z,null,J(m.menus.data,i=>(u(),S(e(q),{key:i.id},{default:s(()=>[t(e(h),null,{default:s(()=>[i.has_image&&i.image_url?(u(),p("div",{key:0,class:"w-16 h-16 rounded overflow-hidden cursor-pointer hover:opacity-80 transition-opacity",onClick:E=>ae(i)},[r("img",{src:i.image_url,alt:i.label||"Menu",class:"w-full h-full object-cover"},null,8,at)],8,lt)):(u(),p("div",nt,[t(e(Te),{class:"h-6 w-6 text-gray-400"})]))]),_:2},1024),t(e(h),{class:"font-medium"},{default:s(()=>[o(f(i.label??"-"),1)]),_:2},1024),t(e(h),{class:"max-w-xs truncate"},{default:s(()=>[o(f(i.description??"-"),1)]),_:2},1024),t(e(h),null,{default:s(()=>[o("€"+f(Number(i.price).toFixed(2)),1)]),_:2},1024),t(e(h),null,{default:s(()=>[r("span",{class:T(["inline-flex items-center rounded-full px-2 py-1 text-xs font-medium",i.menutype==="menuset"?"bg-blue-50 text-blue-700 ring-1 ring-inset ring-blue-600/20":"bg-gray-50 text-gray-600 ring-1 ring-inset ring-gray-500/10"])},f(i.menutype==="menuset"?"Menu Set":"Normal"),3)]),_:2},1024),t(e(h),{class:"text-right"},{default:s(()=>[r("div",ot,[t(e(w),{variant:"outline",size:"sm",onClick:E=>se(i)},{default:s(()=>[...l[17]||(l[17]=[o(" Edit ",-1)])]),_:1},8,["onClick"]),t(e(w),{variant:"destructive",size:"sm",onClick:E=>le(i)},{default:s(()=>[...l[18]||(l[18]=[o(" Delete ",-1)])]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),m.menus.last_page>1?(u(),p("div",rt,[r("div",it," Showing "+f((m.menus.current_page-1)*m.menus.per_page+1)+" to "+f(Math.min(m.menus.current_page*m.menus.per_page,m.menus.total))+" of "+f(m.menus.total)+" menus ",1),r("div",ut,[(u(!0),p(z,null,J(m.menus.links,i=>(u(),S(e(w),{key:i.label,variant:i.active?"default":"outline",size:"sm",disabled:!i.url,onClick:E=>oe(i.url),innerHTML:i.label},null,8,["variant","disabled","onClick","innerHTML"]))),128))])])):_("",!0),t(e(I),{open:y.value,"onUpdate:open":l[2]||(l[2]=i=>y.value=i)},{default:s(()=>[t(e(N),{class:"max-w-4xl"},{default:s(()=>[t(e(F),null,{default:s(()=>[t(e(L),null,{default:s(()=>[o(f(d.value?.label),1)]),_:1}),d.value?.description?(u(),S(e(P),{key:0},{default:s(()=>[o(f(d.value.description),1)]),_:1})):_("",!0)]),_:1}),r("div",dt,[d.value?.image_url?(u(),p("img",{key:0,src:d.value.image_url,alt:d.value.label||"Menu",class:"max-w-full max-h-[70vh] rounded-lg"},null,8,mt)):_("",!0)])]),_:1})]),_:1},8,["open"]),t(e(I),{open:k.value,"onUpdate:open":l[3]||(l[3]=i=>k.value=i)},{default:s(()=>[t(e(N),{class:"max-w-2xl max-h-[90vh] overflow-y-auto"},{default:s(()=>[t(e(F),null,{default:s(()=>[t(e(L),null,{default:s(()=>[...l[19]||(l[19]=[o("Add New Menu",-1)])]),_:1}),t(e(P),null,{default:s(()=>[...l[20]||(l[20]=[o(" Create a new menu item. ",-1)])]),_:1})]),_:1}),t(W,{menu:ee,"submit-url":"/admin/menus",method:"post",onSuccess:R})]),_:1})]),_:1},8,["open"]),t(e(I),{open:M.value,"onUpdate:open":l[4]||(l[4]=i=>M.value=i)},{default:s(()=>[t(e(N),{class:"max-w-2xl max-h-[90vh] overflow-y-auto"},{default:s(()=>[t(e(F),null,{default:s(()=>[t(e(L),null,{default:s(()=>[...l[21]||(l[21]=[o("Edit Menu",-1)])]),_:1}),t(e(P),null,{default:s(()=>[...l[22]||(l[22]=[o(" Update the menu information. ",-1)])]),_:1})]),_:1}),a.value?(u(),S(W,{key:0,menu:a.value,"submit-url":`/admin/menus/${a.value.id}`,method:"put",onSuccess:R},null,8,["menu","submit-url"])):_("",!0)]),_:1})]),_:1},8,["open"]),t(e(I),{open:$.value,"onUpdate:open":l[6]||(l[6]=i=>$.value=i)},{default:s(()=>[t(e(N),null,{default:s(()=>[t(e(F),{class:"space-y-3"},{default:s(()=>[t(e(L),null,{default:s(()=>[...l[23]||(l[23]=[o("Delete Menu",-1)])]),_:1}),t(e(P),null,{default:s(()=>[l[24]||(l[24]=o(" Are you sure you want to delete ",-1)),r("strong",null,f(a.value?.label),1),l[25]||(l[25]=o("? This action cannot be undone. ",-1))]),_:1})]),_:1}),r("div",ft,[t(e(w),{type:"button",variant:"secondary",onClick:l[5]||(l[5]=i=>$.value=!1)},{default:s(()=>[...l[26]||(l[26]=[o(" Cancel ",-1)])]),_:1}),t(e(w),{variant:"destructive",disabled:e(G).processing,onClick:ne},{default:s(()=>[...l[27]||(l[27]=[o(" Delete Menu ",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["open"])])]),_:1})],64))}});export{jt as default};
