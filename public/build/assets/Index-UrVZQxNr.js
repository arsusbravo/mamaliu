import{d as R,q as W,c as p,s as le,b as d,a as t,f as _,u as e,w as l,g as n,G as S,t as m,F as T,r as B,H as ae,I as ne,o as f,e as w,l as re,j as b,z as oe,h as ie,T as ue,i as z}from"./app-DujlMToZ.js";import{_ as de}from"./AppLayout.vue_vue_type_script_setup_true_lang-DI-4sE1T.js";import{_ as g}from"./index-COZ9yg7p.js";import{_ as k,a as D}from"./Label.vue_vue_type_script_setup_true_lang-DMcM0mYD.js";import{_ as me,a as fe,b as ce,c as pe,d as ve}from"./SelectValue.vue_vue_type_script_setup_true_lang-DDVscWms.js";import{_ as ge,a as J,b as _e,c as h}from"./TableCell.vue_vue_type_script_setup_true_lang-AnhFTQiH.js";import{_ as xe}from"./DialogFooter.vue_vue_type_script_setup_true_lang-kLBKUySP.js";import{_ as E,a as F,b as M,c as j,d as q}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CKHYshh8.js";import{_ as be,a as ye,b as $e,c as P,d as K}from"./Toast.vue_vue_type_script_setup_true_lang-BfQQuZ46.js";import{S as ke}from"./search-BZVoNidW.js";import"./Presence-4L55fpup.js";import"./x-CH5-w-XS.js";import"./VisuallyHidden-yGDzxEwe.js";import"./index-B8We5vQ-.js";import"./shopping-bag-BLC-eryW.js";import"./check-CTUvkM7p.js";import"./useFormControl-DemUTOc3.js";const we={class:"grid gap-4"},Ce={class:"grid gap-2"},Ve={key:0,class:"text-sm text-red-500"},Se={class:"grid gap-2"},he={key:0,class:"text-sm text-red-500"},De={class:"grid gap-2"},Ue={key:0,class:"text-sm text-red-500"},Te={class:"grid gap-2"},Ne={key:0,class:"text-sm text-red-500"},Ae={class:"flex items-center space-x-2"},ze={key:0,class:"text-sm text-red-500 ml-2"},Ee={class:"grid gap-2"},Fe={key:0,class:"text-sm text-red-500"},O=R({__name:"FormClient",props:{client:{},groups:{},submitUrl:{},method:{}},emits:["success"],setup(r,{emit:y}){const v=r,N=y,a=W({name:v.client.name||"",phone:v.client.phone||"",username:v.client.username||"",group_id:v.client.group_id?String(v.client.group_id):"",active:v.client.active,password:""}),C=()=>{const $=v.method==="post"?"post":"put",o={...a.data(),group_id:a.group_id?Number(a.group_id):null};a.transform(()=>o)[$](v.submitUrl,{onSuccess:()=>{N("success"),a.reset()}})};return($,o)=>(f(),p("form",{onSubmit:le(C,["prevent"]),class:"space-y-4"},[d("div",we,[d("div",Ce,[t(e(k),{for:"name"},{default:l(()=>[...o[6]||(o[6]=[n("Name *",-1)])]),_:1}),t(e(D),{id:"name",modelValue:e(a).name,"onUpdate:modelValue":o[0]||(o[0]=u=>e(a).name=u),type:"text",required:"",class:S({"border-red-500":e(a).errors.name})},null,8,["modelValue","class"]),e(a).errors.name?(f(),p("span",Ve,m(e(a).errors.name),1)):_("",!0)]),d("div",Se,[t(e(k),{for:"username"},{default:l(()=>[...o[7]||(o[7]=[n("Email *",-1)])]),_:1}),t(e(D),{id:"username",modelValue:e(a).username,"onUpdate:modelValue":o[1]||(o[1]=u=>e(a).username=u),type:"email",required:"",class:S({"border-red-500":e(a).errors.username})},null,8,["modelValue","class"]),e(a).errors.username?(f(),p("span",he,m(e(a).errors.username),1)):_("",!0)]),d("div",De,[t(e(k),{for:"phone"},{default:l(()=>[...o[8]||(o[8]=[n("Phone",-1)])]),_:1}),t(e(D),{id:"phone",modelValue:e(a).phone,"onUpdate:modelValue":o[2]||(o[2]=u=>e(a).phone=u),type:"text",class:S({"border-red-500":e(a).errors.phone})},null,8,["modelValue","class"]),e(a).errors.phone?(f(),p("span",Ue,m(e(a).errors.phone),1)):_("",!0)]),d("div",Te,[t(e(k),{for:"group"},{default:l(()=>[...o[9]||(o[9]=[n("Group *",-1)])]),_:1}),t(e(me),{modelValue:e(a).group_id,"onUpdate:modelValue":o[3]||(o[3]=u=>e(a).group_id=u),required:""},{default:l(()=>[t(e(fe),{id:"group",class:S({"border-red-500":e(a).errors.group_id})},{default:l(()=>[t(e(ce),{placeholder:"Select a group"})]),_:1},8,["class"]),t(e(pe),null,{default:l(()=>[(f(!0),p(T,null,B(r.groups,u=>(f(),w(e(ve),{key:u.id,value:String(u.id)},{default:l(()=>[n(m(u.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(a).errors.group_id?(f(),p("span",Ne,m(e(a).errors.group_id),1)):_("",!0)]),d("div",Ae,[ae(d("input",{id:"active",type:"checkbox","onUpdate:modelValue":o[4]||(o[4]=u=>e(a).active=u),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[ne,e(a).active]]),t(e(k),{for:"active",class:"text-sm font-medium leading-none cursor-pointer"},{default:l(()=>[...o[10]||(o[10]=[n(" Active ",-1)])]),_:1}),e(a).errors.active?(f(),p("span",ze,m(e(a).errors.active),1)):_("",!0)]),d("div",Ee,[t(e(k),{for:"password"},{default:l(()=>[n(" Password "+m(r.method==="put"?"(leave blank to keep current)":"*"),1)]),_:1}),t(e(D),{id:"password",modelValue:e(a).password,"onUpdate:modelValue":o[5]||(o[5]=u=>e(a).password=u),type:"password",required:r.method==="post",class:S({"border-red-500":e(a).errors.password})},null,8,["modelValue","required","class"]),e(a).errors.password?(f(),p("span",Fe,m(e(a).errors.password),1)):_("",!0)])]),t(e(xe),{class:"gap-2"},{default:l(()=>[t(e(ge),{"as-child":""},{default:l(()=>[t(e(g),{type:"button",variant:"secondary"},{default:l(()=>[...o[11]||(o[11]=[n(" Cancel ",-1)])]),_:1})]),_:1}),t(e(g),{type:"submit",disabled:e(a).processing},{default:l(()=>[n(m(r.method==="post"?"Create Client":"Update Client"),1)]),_:1},8,["disabled"])]),_:1})],32))}}),Me={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},je={class:"flex items-center justify-between"},qe={class:"relative max-w-sm"},Pe={class:"rounded-md border"},Be={class:"flex justify-end gap-2"},He={key:0,class:"flex items-center justify-between gap-2"},Ie={class:"text-sm text-muted-foreground hidden sm:block"},Le={class:"flex sm:hidden items-center gap-2 ml-auto"},Ge={class:"text-sm font-medium px-2"},Qe={class:"hidden sm:flex gap-2"},Je={class:"flex justify-end gap-2 mt-6"},dt=R({__name:"Index",props:{clients:{default:()=>({data:[],current_page:1,last_page:1,per_page:10,total:0,links:[]})},groups:{default:()=>[]},filters:{default:()=>({search:"",sort:"created_at",direction:"desc"})}},setup(r){const y=r,v=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Clients",href:"/admin/clients"}],N=re(),a=b(!1),C=b(""),$=b("success"),o=b(!1),u=b(!1),V=b(!1),x=b(null),U=b(y.filters?.search||"");let H;const X={id:0,name:null,phone:null,username:null,group_id:null,active:!0},I=W({}),Y=()=>{o.value=!0},Z=c=>{x.value=c,u.value=!0},ee=c=>{x.value=c,V.value=!0},L=()=>{o.value=!1,u.value=!1},te=()=>{x.value&&I.delete(`/admin/clients/${x.value.id}`,{onSuccess:()=>{V.value=!1}})},A=c=>{c&&z.visit(c)},se=()=>{clearTimeout(H),H=setTimeout(()=>{z.get("/admin/clients",{search:U.value,sort:y.filters?.sort,direction:y.filters?.direction},{preserveState:!0,preserveScroll:!0})},300)},G=c=>{let s="asc";y.filters?.sort===c&&y.filters?.direction==="asc"&&(s="desc"),z.get("/admin/clients",{search:U.value,sort:c,direction:s},{preserveState:!0,preserveScroll:!0})};return oe(()=>N.props.flash,c=>{c?.success&&($.value="success",C.value=c.success,a.value=!0,setTimeout(()=>{a.value=!1},3e3)),c?.error&&($.value="destructive",C.value=c.error,a.value=!0,setTimeout(()=>{a.value=!1},3e3))},{deep:!0}),(c,s)=>(f(),p(T,null,[t(e(ie),{title:"Clients"}),t(ue,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:l(()=>[a.value?(f(),w(be,{key:0,variant:$.value,position:"top-right"},{default:l(()=>[n(m(C.value),1)]),_:1},8,["variant"])):_("",!0)]),_:1}),t(de,{breadcrumbs:v},{default:l(()=>[d("div",Me,[d("div",je,[s[8]||(s[8]=d("h2",{class:"text-2xl font-bold"},"Clients",-1)),t(e(g),{onClick:Y},{default:l(()=>[...s[7]||(s[7]=[n("Add Client",-1)])]),_:1})]),d("div",qe,[t(e(ke),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(D),{modelValue:U.value,"onUpdate:modelValue":s[0]||(s[0]=i=>U.value=i),onInput:se,type:"search",placeholder:"Search clients...",class:"pl-9"},null,8,["modelValue"])]),d("div",Pe,[t(e(ye),null,{default:l(()=>[t(e($e),null,{default:l(()=>[t(e(P),null,{default:l(()=>[t(e(J),{"sort-key":"name","current-sort":r.filters?.sort,"current-direction":r.filters?.direction,onSort:G},{default:l(()=>[...s[9]||(s[9]=[n(" Name ",-1)])]),_:1},8,["current-sort","current-direction"]),t(e(J),{"sort-key":"username","current-sort":r.filters?.sort,"current-direction":r.filters?.direction,onSort:G},{default:l(()=>[...s[10]||(s[10]=[n(" Email ",-1)])]),_:1},8,["current-sort","current-direction"]),t(e(K),null,{default:l(()=>[...s[11]||(s[11]=[n("Phone",-1)])]),_:1}),t(e(K),{class:"text-right"},{default:l(()=>[...s[12]||(s[12]=[n("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(e(_e),null,{default:l(()=>[r.clients.data.length===0?(f(),w(e(P),{key:0},{default:l(()=>[t(e(h),{colspan:"5",class:"text-center text-muted-foreground"},{default:l(()=>[...s[13]||(s[13]=[n(" No clients found. Add your first client to get started. ",-1)])]),_:1})]),_:1})):_("",!0),(f(!0),p(T,null,B(r.clients.data,i=>(f(),w(e(P),{key:i.id},{default:l(()=>[t(e(h),{class:"font-medium"},{default:l(()=>[n(m(i.name??"-"),1)]),_:2},1024),t(e(h),null,{default:l(()=>[n(m(i.username??"-"),1)]),_:2},1024),t(e(h),null,{default:l(()=>[n(m(i.phone??"-"),1)]),_:2},1024),t(e(h),{class:"text-right"},{default:l(()=>[d("div",Be,[t(e(g),{variant:"outline",size:"sm",onClick:Q=>Z(i)},{default:l(()=>[...s[14]||(s[14]=[n(" Edit ",-1)])]),_:1},8,["onClick"]),t(e(g),{variant:"destructive",size:"sm",onClick:Q=>ee(i)},{default:l(()=>[...s[15]||(s[15]=[n(" Delete ",-1)])]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),r.clients.last_page>1?(f(),p("div",He,[d("div",Ie," Showing "+m((r.clients.current_page-1)*r.clients.per_page+1)+" to "+m(Math.min(r.clients.current_page*r.clients.per_page,r.clients.total))+" of "+m(r.clients.total)+" clients ",1),d("div",Le,[t(e(g),{variant:"outline",size:"sm",disabled:r.clients.current_page===1,onClick:s[1]||(s[1]=i=>A(r.clients.links[0]?.url))},{default:l(()=>[...s[16]||(s[16]=[n(" ← ",-1)])]),_:1},8,["disabled"]),d("span",Ge,m(r.clients.current_page)+" / "+m(r.clients.last_page),1),t(e(g),{variant:"outline",size:"sm",disabled:r.clients.current_page===r.clients.last_page,onClick:s[2]||(s[2]=i=>A(r.clients.links[r.clients.links.length-1]?.url))},{default:l(()=>[...s[17]||(s[17]=[n(" → ",-1)])]),_:1},8,["disabled"])]),d("div",Qe,[(f(!0),p(T,null,B(r.clients.links,i=>(f(),w(e(g),{key:i.label,variant:i.active?"default":"outline",size:"sm",disabled:!i.url,onClick:Q=>A(i.url),innerHTML:i.label},null,8,["variant","disabled","onClick","innerHTML"]))),128))])])):_("",!0),t(e(E),{open:o.value,"onUpdate:open":s[3]||(s[3]=i=>o.value=i)},{default:l(()=>[t(e(F),{class:"max-w-2xl max-h-[90vh] overflow-y-auto"},{default:l(()=>[t(e(M),null,{default:l(()=>[t(e(j),null,{default:l(()=>[...s[18]||(s[18]=[n("Add New Client",-1)])]),_:1}),t(e(q),null,{default:l(()=>[...s[19]||(s[19]=[n(" Fill in the client information below. ",-1)])]),_:1})]),_:1}),t(O,{client:X,groups:r.groups,"submit-url":"/admin/clients",method:"post",onSuccess:L},null,8,["groups"])]),_:1})]),_:1},8,["open"]),t(e(E),{open:u.value,"onUpdate:open":s[4]||(s[4]=i=>u.value=i)},{default:l(()=>[t(e(F),{class:"max-w-2xl max-h-[90vh] overflow-y-auto"},{default:l(()=>[t(e(M),null,{default:l(()=>[t(e(j),null,{default:l(()=>[...s[20]||(s[20]=[n("Edit Client",-1)])]),_:1}),t(e(q),null,{default:l(()=>[...s[21]||(s[21]=[n(" Update the client information below. ",-1)])]),_:1})]),_:1}),x.value?(f(),w(O,{key:0,client:x.value,groups:r.groups,"submit-url":`/admin/clients/${x.value.id}`,method:"put",onSuccess:L},null,8,["client","groups","submit-url"])):_("",!0)]),_:1})]),_:1},8,["open"]),t(e(E),{open:V.value,"onUpdate:open":s[6]||(s[6]=i=>V.value=i)},{default:l(()=>[t(e(F),null,{default:l(()=>[t(e(M),{class:"space-y-3"},{default:l(()=>[t(e(j),null,{default:l(()=>[...s[22]||(s[22]=[n("Delete Client",-1)])]),_:1}),t(e(q),null,{default:l(()=>[s[23]||(s[23]=n(" Are you sure you want to delete ",-1)),d("strong",null,m(x.value?.name),1),s[24]||(s[24]=n("? This action cannot be undone. ",-1))]),_:1})]),_:1}),d("div",Je,[t(e(g),{type:"button",variant:"secondary",onClick:s[5]||(s[5]=i=>V.value=!1)},{default:l(()=>[...s[25]||(s[25]=[n(" Cancel ",-1)])]),_:1}),t(e(g),{variant:"destructive",disabled:e(I).processing,onClick:te},{default:l(()=>[...s[26]||(s[26]=[n(" Delete Client ",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["open"])])]),_:1})],64))}});export{dt as default};
