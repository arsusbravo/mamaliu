import{d as $,c,a as s,u as e,h as L,w as o,b as t,e as N,f as k,g as d,o as i,t as l,F as b,r as w,i as g}from"./app-CVFrMruv.js";import{_ as V}from"./AppLayout.vue_vue_type_script_setup_true_lang-s29sQbhS.js";import{_ as m,a as f}from"./CardContent.vue_vue_type_script_setup_true_lang-Cil1SsLY.js";import{_ as y}from"./CardDescription.vue_vue_type_script_setup_true_lang-C3AGyxwx.js";import{_,a as x}from"./CardTitle.vue_vue_type_script_setup_true_lang--dAUnDwf.js";import{c as O,_ as v}from"./index-Xg053eB2.js";import{S as D}from"./shopping-cart-QzD3irjx.js";import{C as z}from"./calendar-odTwGDK0.js";import{P as B}from"./plus-CQDDVTJa.js";import{S as H}from"./sparkles-CEghy7DB.js";import"./Presence-DVICQy4n.js";import"./x-B5_TftGX.js";import"./VisuallyHidden-ClL5P1uX.js";import"./index-B8We5vQ-.js";import"./shopping-bag-RPXRPF-_.js";const I=O("DollarSignIcon",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const Q=O("MessageSquareIcon",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const U=O("UtensilsCrossedIcon",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]),R={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},A={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},E={class:"p-2 bg-blue-500 rounded-lg"},Z={key:0,class:"space-y-2"},G={key:1},J={class:"text-2xl font-bold text-blue-700"},K={class:"text-xs text-muted-foreground"},X={class:"p-2 bg-green-500 rounded-lg"},ee={class:"text-2xl font-bold text-green-700"},te={class:"text-xs text-muted-foreground"},se={class:"p-2 bg-orange-500 rounded-lg"},re={class:"text-2xl font-bold text-orange-700"},oe={class:"p-2 bg-purple-500 rounded-lg"},le={class:"text-2xl font-bold text-purple-700"},ae={class:"text-xs text-muted-foreground"},ne={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-7"},de={class:"flex items-center justify-between"},ie={key:0,class:"text-center py-12"},ue={key:1,class:"space-y-4"},ce={class:"space-y-1 flex-1"},me={class:"flex items-center gap-2"},fe={class:"text-sm font-medium leading-none"},_e={class:"text-sm text-muted-foreground"},xe={class:"flex items-center gap-2 text-xs text-muted-foreground"},ge={class:"font-medium text-green-600"},pe={class:"flex items-center justify-between"},be={class:"space-y-3"},he={class:"flex-1"},ke={class:"font-medium"},we={class:"text-xs text-muted-foreground"},ye={class:"text-xs text-muted-foreground"},ve={class:"text-sm font-medium text-orange-600"},Oe={key:0,class:"text-center py-4 text-muted-foreground text-sm"},Ce={class:"space-y-4"},qe={class:"flex items-center justify-between mb-1"},Se={class:"text-sm font-medium"},Te={class:"text-xs text-muted-foreground"},We={class:"text-sm text-muted-foreground italic"},Ne={class:"text-xs text-muted-foreground mt-1"},Re=$({__name:"Dashboard",props:{stats:{default:()=>({total_orders_this_week:0,total_revenue_this_quarter:0,total_weekmenus_this_quarter:0,total_pre_orders:0,total_clients:0,current_quarter:1})},recentOrders:{default:()=>[]},preOrders:{default:()=>[]},recentNotes:{default:()=>[]},currentWeek:{default:1},currentYear:{default:2025},latestPreOrderWeek:{default:1},latestPreOrderYear:{default:2025}},setup(n){const u=n,M=[{title:"Dashboard",href:"/admin/dashboard"}],j=S=>{const r=new Date(S),p=new Date().getTime()-r.getTime(),T=Math.floor(p/(1e3*60*60)),W=Math.floor(p/(1e3*60));return W<60?`${W}m ago`:T<24?`${T}h ago`:r.toLocaleDateString()},h=()=>{g.get("/admin/orders",{week:u.currentWeek,year:u.currentYear})},C=()=>{g.get("/admin/orders",{week:u.latestPreOrderWeek,year:u.latestPreOrderYear})},q=()=>{g.get("/admin/weekmenus",{week:u.currentWeek,year:u.currentYear})},P=()=>{u.stats.total_orders_this_week===0?q():h()},Y=()=>{u.preOrders.length>0?g.get("/admin/orders",{week:u.preOrders[0].earliest_week,year:u.preOrders[0].earliest_year}):C()},F=()=>{g.get("/admin/weekmenus",{week:u.currentWeek,year:u.currentYear})};return(S,r)=>(i(),c(b,null,[s(e(L),{title:"Dashboard"}),s(V,{breadcrumbs:M},{default:o(()=>[t("div",R,[t("div",A,[s(e(m),{class:"cursor-pointer hover:bg-accent transition-colors border-l-4 border-blue-500 bg-linear-to-r from-blue-50 to-white",onClick:P},{default:o(()=>[s(e(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(e(x),{class:"text-sm font-medium"},{default:o(()=>[...r[0]||(r[0]=[d("Orders This Week",-1)])]),_:1}),t("div",E,[s(e(D),{class:"h-4 w-4 text-white"})])]),_:1}),s(e(f),null,{default:o(()=>[n.stats.total_orders_this_week===0?(i(),c("div",Z,[...r[1]||(r[1]=[t("div",{class:"text-lg font-semibold text-muted-foreground"},"No orders yet",-1),t("p",{class:"text-xs text-muted-foreground"}," Create week menus first → ",-1)])])):(i(),c("div",G,[t("div",J,l(n.stats.total_orders_this_week),1),t("p",K," Week "+l(n.currentWeek)+", "+l(n.currentYear),1)]))]),_:1})]),_:1}),s(e(m),{class:"cursor-pointer hover:bg-accent transition-colors border-l-4 border-green-500 bg-linear-to-r from-green-50 to-white",onClick:h},{default:o(()=>[s(e(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(e(x),{class:"text-sm font-medium"},{default:o(()=>[...r[2]||(r[2]=[d("Revenue This Quarter",-1)])]),_:1}),t("div",X,[s(e(I),{class:"h-4 w-4 text-white"})])]),_:1}),s(e(f),null,{default:o(()=>[t("div",ee," €"+l((n.stats.total_revenue_this_quarter||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1),t("p",te," Q"+l(n.stats.current_quarter||1)+" "+l(n.currentYear),1)]),_:1})]),_:1}),s(e(m),{class:"cursor-pointer hover:bg-accent transition-colors border-l-4 border-orange-500 bg-linear-to-r from-orange-50 to-white",onClick:Y},{default:o(()=>[s(e(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(e(x),{class:"text-sm font-medium"},{default:o(()=>[...r[3]||(r[3]=[d("Pre-Orders",-1)])]),_:1}),t("div",se,[s(e(z),{class:"h-4 w-4 text-white"})])]),_:1}),s(e(f),null,{default:o(()=>[t("div",re,l(n.stats.total_pre_orders),1),r[4]||(r[4]=t("p",{class:"text-xs text-muted-foreground"}," Future weeks ",-1))]),_:1})]),_:1}),s(e(m),{class:"cursor-pointer hover:bg-accent transition-colors border-l-4 border-purple-500 bg-linear-to-r from-purple-50 to-white",onClick:F},{default:o(()=>[s(e(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[s(e(x),{class:"text-sm font-medium"},{default:o(()=>[...r[5]||(r[5]=[d("Week Menus This Quarter",-1)])]),_:1}),t("div",oe,[s(e(U),{class:"h-4 w-4 text-white"})])]),_:1}),s(e(f),null,{default:o(()=>[t("div",le,[d(l(n.stats.total_weekmenus_this_quarter||0)+" ",1),r[6]||(r[6]=t("span",{class:"font-thin text-xs italic text-slate-400"},"of appr. 13 weeks",-1))]),t("p",ae," Q"+l(n.stats.current_quarter||1)+" "+l(n.currentYear),1)]),_:1})]),_:1})]),t("div",ne,[s(e(m),{class:"col-span-1 md:col-span-2 lg:col-span-4"},{default:o(()=>[s(e(_),null,{default:o(()=>[t("div",de,[t("div",null,[s(e(x),null,{default:o(()=>[...r[7]||(r[7]=[d("Recent Orders",-1)])]),_:1}),s(e(y),null,{default:o(()=>[...r[8]||(r[8]=[d("Client orders this quarter",-1)])]),_:1})]),s(e(v),{variant:"outline",size:"sm",onClick:h},{default:o(()=>[...r[9]||(r[9]=[d(" View All ",-1)])]),_:1})])]),_:1}),s(e(f),null,{default:o(()=>[n.recentOrders.length===0?(i(),c("div",ie,[s(e(D),{class:"h-16 w-16 text-blue-300 mx-auto mb-4 opacity-50"}),r[11]||(r[11]=t("h3",{class:"text-lg font-semibold mb-2"},"No Orders Yet",-1)),r[12]||(r[12]=t("p",{class:"text-sm text-muted-foreground mb-4"}," Start by creating week menus, then clients can place orders ",-1)),s(e(v),{onClick:q,size:"sm"},{default:o(()=>[s(e(B),{class:"h-4 w-4 mr-2"}),r[10]||(r[10]=d(" Create Week Menu ",-1))]),_:1})])):(i(),c("div",ue,[(i(!0),c(b,null,w(n.recentOrders,a=>(i(),c("div",{key:a.user_id,class:"flex items-start justify-between border-b pb-3 last:border-0 last:pb-0"},[t("div",ce,[t("div",me,[t("p",fe,l(a.client_name),1),a.is_new?(i(),N(e(H),{key:0,class:"h-3 w-3 text-yellow-500 animate-pulse"})):k("",!0)]),t("p",_e,l(a.order_count)+" order"+l(a.order_count!==1?"s":"")+" this quarter ",1),t("div",xe,[t("span",null,l(j(a.latest_date)),1)])]),t("div",ge," €"+l(a.total.toFixed(2)),1)]))),128))]))]),_:1})]),_:1}),s(e(m),{class:"col-span-1 md:col-span-2 lg:col-span-3"},{default:o(()=>[s(e(_),null,{default:o(()=>[t("div",pe,[t("div",null,[s(e(x),null,{default:o(()=>[...r[13]||(r[13]=[d("Pre-Orders",-1)])]),_:1}),s(e(y),null,{default:o(()=>[...r[14]||(r[14]=[d("Upcoming orders by client",-1)])]),_:1})]),s(e(v),{variant:"outline",size:"sm",onClick:C},{default:o(()=>[...r[15]||(r[15]=[d(" View All ",-1)])]),_:1})])]),_:1}),s(e(f),null,{default:o(()=>[t("div",be,[(i(!0),c(b,null,w(n.preOrders.slice(0,5),a=>(i(),c("div",{key:a.user_id,class:"flex items-start justify-between text-sm border-b pb-2 last:border-0 last:pb-0"},[t("div",he,[t("p",ke,l(a.client_name),1),t("p",we,l(a.order_count)+" order"+l(a.order_count!==1?"s":""),1),t("p",ye," From week "+l(a.earliest_week)+", "+l(a.earliest_year),1)]),t("div",ve," €"+l(a.total.toFixed(2)),1)]))),128)),n.preOrders.length===0?(i(),c("div",Oe," No pre-orders ")):k("",!0)])]),_:1})]),_:1})]),n.recentNotes.length>0?(i(),N(e(m),{key:0},{default:o(()=>[s(e(_),null,{default:o(()=>[s(e(x),{class:"flex items-center gap-2"},{default:o(()=>[s(e(Q),{class:"h-5 w-5 text-purple-500"}),r[16]||(r[16]=d(" Recent Client Notes ",-1))]),_:1}),s(e(y),null,{default:o(()=>[...r[17]||(r[17]=[d("Notes from the last 7 days",-1)])]),_:1})]),_:1}),s(e(f),null,{default:o(()=>[t("div",Ce,[(i(!0),c(b,null,w(n.recentNotes,(a,p)=>(i(),c("div",{key:p,class:"border-l-2 border-purple-500 pl-4 py-2"},[t("div",qe,[t("p",Se,l(a.client_name),1),t("span",Te,l(a.created_at),1)]),t("p",We,'"'+l(a.notes)+'"',1),t("p",Ne,l(a.menu_label),1)]))),128))])]),_:1})]),_:1})):k("",!0)])]),_:1})],64))}});export{Re as default};
