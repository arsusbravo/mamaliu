import{d as L,c,a as t,u as e,h as V,w as o,b as r,e as W,f as h,g as d,o as i,t as l,F as k,r as b,i as g}from"./app-DTGQeK2P.js";import{_ as z}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dcvxksj8.js";import{_ as m,a as f}from"./CardContent.vue_vue_type_script_setup_true_lang-BfI3ec40.js";import{_ as w}from"./CardDescription.vue_vue_type_script_setup_true_lang-DHv1rZ3j.js";import{_,a as x}from"./CardTitle.vue_vue_type_script_setup_true_lang-DFb3RkMz.js";import{c as C,_ as v}from"./index-BvVEoErb.js";import{S as D}from"./shopping-cart-ZAsAyWfR.js";import{C as P}from"./calendar-BiFbJi_E.js";import{P as B}from"./plus-C09dF3aE.js";import{S as H}from"./sparkles-C22CryBH.js";import"./Presence-DOdkaArE.js";import"./x-BxN59Ura.js";import"./VisuallyHidden-MyUaASOh.js";import"./index-B8We5vQ-.js";import"./shopping-bag-C2bkzHxh.js";const I=C("DollarSignIcon",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);const Q=C("MessageSquareIcon",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);const U=C("UtensilsCrossedIcon",[["path",{d:"m16 2-2.3 2.3a3 3 0 0 0 0 4.2l1.8 1.8a3 3 0 0 0 4.2 0L22 8",key:"n7qcjb"}],["path",{d:"M15 15 3.3 3.3a4.2 4.2 0 0 0 0 6l7.3 7.3c.7.7 2 .7 2.8 0L15 15Zm0 0 7 7",key:"d0u48b"}],["path",{d:"m2.1 21.8 6.4-6.3",key:"yn04lh"}],["path",{d:"m19 5-7 7",key:"194lzd"}]]),R={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},A={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-4"},E={key:0,class:"space-y-2"},Z={key:1},G={class:"text-2xl font-bold"},J={class:"text-xs text-muted-foreground"},K={class:"text-2xl font-bold"},X={class:"text-xs text-muted-foreground"},ee={class:"text-2xl font-bold"},te={class:"text-2xl font-bold"},se={class:"text-xs text-muted-foreground"},re={class:"grid gap-4 md:grid-cols-2 lg:grid-cols-7"},oe={class:"flex items-center justify-between"},le={key:0,class:"text-center py-12"},ae={key:1,class:"space-y-4"},ne={class:"space-y-1 flex-1"},de={class:"flex items-center gap-2"},ie={class:"text-sm font-medium leading-none"},ue={class:"text-sm text-muted-foreground"},ce={class:"flex items-center gap-2 text-xs text-muted-foreground"},me={class:"font-medium"},fe={class:"flex items-center justify-between"},_e={class:"space-y-3"},xe={class:"flex-1"},ge={class:"font-medium"},pe={class:"text-xs text-muted-foreground"},ke={class:"text-xs text-muted-foreground"},ye={class:"text-sm font-medium"},he={key:0,class:"text-center py-4 text-muted-foreground text-sm"},be={class:"space-y-4"},we={class:"flex items-center justify-between mb-1"},ve={class:"text-sm font-medium"},Ce={class:"text-xs text-muted-foreground"},Oe={class:"text-sm text-muted-foreground italic"},qe={class:"text-xs text-muted-foreground mt-1"},He=L({__name:"Dashboard",props:{stats:{default:()=>({total_orders_this_week:0,total_revenue_this_quarter:0,total_weekmenus_this_quarter:0,total_pre_orders:0,total_clients:0,current_quarter:1})},recentOrders:{default:()=>[]},preOrders:{default:()=>[]},recentNotes:{default:()=>[]},currentWeek:{default:1},currentYear:{default:2025}},setup(n){const u=n,M=[{title:"Dashboard",href:"/admin/dashboard"}],j=S=>{const s=new Date(S),p=new Date().getTime()-s.getTime(),T=Math.floor(p/(1e3*60*60)),N=Math.floor(p/(1e3*60));return N<60?`${N}m ago`:T<24?`${T}h ago`:s.toLocaleDateString()},y=()=>{g.get("/admin/orders",{week:u.currentWeek,year:u.currentYear})},O=()=>{g.get("/admin/orders",{week:u.currentWeek+1,year:u.currentYear})},q=()=>{g.get("/admin/weekmenus",{week:u.currentWeek,year:u.currentYear})},F=()=>{u.stats.total_orders_this_week===0?q():y()},Y=()=>{u.preOrders.length>0?g.get("/admin/orders",{week:u.preOrders[0].earliest_week,year:u.preOrders[0].earliest_year}):O()},$=()=>{g.get("/admin/weekmenus",{week:u.currentWeek,year:u.currentYear})};return(S,s)=>(i(),c(k,null,[t(e(V),{title:"Dashboard"}),t(z,{breadcrumbs:M},{default:o(()=>[r("div",R,[r("div",A,[t(e(m),{class:"cursor-pointer hover:bg-accent transition-colors",onClick:F},{default:o(()=>[t(e(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[t(e(x),{class:"text-sm font-medium"},{default:o(()=>[...s[0]||(s[0]=[d("Orders This Week",-1)])]),_:1}),t(e(D),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(f),null,{default:o(()=>[n.stats.total_orders_this_week===0?(i(),c("div",E,[...s[1]||(s[1]=[r("div",{class:"text-lg font-semibold text-muted-foreground"},"No orders yet",-1),r("p",{class:"text-xs text-muted-foreground"}," Create week menus first → ",-1)])])):(i(),c("div",Z,[r("div",G,l(n.stats.total_orders_this_week),1),r("p",J," Week "+l(n.currentWeek)+", "+l(n.currentYear),1)]))]),_:1})]),_:1}),t(e(m),{class:"cursor-pointer hover:bg-accent transition-colors",onClick:y},{default:o(()=>[t(e(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[t(e(x),{class:"text-sm font-medium"},{default:o(()=>[...s[2]||(s[2]=[d("Revenue This Quarter",-1)])]),_:1}),t(e(I),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(f),null,{default:o(()=>[r("div",K," €"+l((n.stats.total_revenue_this_quarter||0).toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})),1),r("p",X," Q"+l(n.stats.current_quarter||1)+" "+l(n.currentYear),1)]),_:1})]),_:1}),t(e(m),{class:"cursor-pointer hover:bg-accent transition-colors",onClick:Y},{default:o(()=>[t(e(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[t(e(x),{class:"text-sm font-medium"},{default:o(()=>[...s[3]||(s[3]=[d("Pre-Orders",-1)])]),_:1}),t(e(P),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(f),null,{default:o(()=>[r("div",ee,l(n.stats.total_pre_orders),1),s[4]||(s[4]=r("p",{class:"text-xs text-muted-foreground"}," Future weeks ",-1))]),_:1})]),_:1}),t(e(m),{class:"cursor-pointer hover:bg-accent transition-colors",onClick:$},{default:o(()=>[t(e(_),{class:"flex flex-row items-center justify-between space-y-0 pb-2"},{default:o(()=>[t(e(x),{class:"text-sm font-medium"},{default:o(()=>[...s[5]||(s[5]=[d("Week Menus This Quarter",-1)])]),_:1}),t(e(U),{class:"h-4 w-4 text-muted-foreground"})]),_:1}),t(e(f),null,{default:o(()=>[r("div",te,[d(l(n.stats.total_weekmenus_this_quarter||0)+" ",1),s[6]||(s[6]=r("span",{class:"font-thin text-xs italic text-slate-200"},"of appr. 13 weeks",-1))]),r("p",se," Q"+l(n.stats.current_quarter||1)+" "+l(n.currentYear),1)]),_:1})]),_:1})]),r("div",re,[t(e(m),{class:"col-span-4"},{default:o(()=>[t(e(_),null,{default:o(()=>[r("div",oe,[r("div",null,[t(e(x),null,{default:o(()=>[...s[7]||(s[7]=[d("Recent Orders",-1)])]),_:1}),t(e(w),null,{default:o(()=>[...s[8]||(s[8]=[d("Client orders this quarter",-1)])]),_:1})]),t(e(v),{variant:"outline",size:"sm",onClick:y},{default:o(()=>[...s[9]||(s[9]=[d(" View All ",-1)])]),_:1})])]),_:1}),t(e(f),null,{default:o(()=>[n.recentOrders.length===0?(i(),c("div",le,[t(e(D),{class:"h-16 w-16 text-muted-foreground mx-auto mb-4 opacity-50"}),s[11]||(s[11]=r("h3",{class:"text-lg font-semibold mb-2"},"No Orders Yet",-1)),s[12]||(s[12]=r("p",{class:"text-sm text-muted-foreground mb-4"}," Start by creating week menus, then clients can place orders ",-1)),t(e(v),{onClick:q,size:"sm"},{default:o(()=>[t(e(B),{class:"h-4 w-4 mr-2"}),s[10]||(s[10]=d(" Create Week Menu ",-1))]),_:1})])):(i(),c("div",ae,[(i(!0),c(k,null,b(n.recentOrders,a=>(i(),c("div",{key:a.user_id,class:"flex items-start justify-between border-b pb-3 last:border-0 last:pb-0"},[r("div",ne,[r("div",de,[r("p",ie,l(a.client_name),1),a.is_new?(i(),W(e(H),{key:0,class:"h-3 w-3 text-yellow-500 animate-pulse"})):h("",!0)]),r("p",ue,l(a.order_count)+" order"+l(a.order_count!==1?"s":"")+" this quarter ",1),r("div",ce,[r("span",null,l(j(a.latest_date)),1)])]),r("div",me," €"+l(a.total.toFixed(2)),1)]))),128))]))]),_:1})]),_:1}),t(e(m),{class:"col-span-3"},{default:o(()=>[t(e(_),null,{default:o(()=>[r("div",fe,[r("div",null,[t(e(x),null,{default:o(()=>[...s[13]||(s[13]=[d("Pre-Orders",-1)])]),_:1}),t(e(w),null,{default:o(()=>[...s[14]||(s[14]=[d("Upcoming orders by client",-1)])]),_:1})]),t(e(v),{variant:"outline",size:"sm",onClick:O},{default:o(()=>[...s[15]||(s[15]=[d(" View All ",-1)])]),_:1})])]),_:1}),t(e(f),null,{default:o(()=>[r("div",_e,[(i(!0),c(k,null,b(n.preOrders.slice(0,5),a=>(i(),c("div",{key:a.user_id,class:"flex items-start justify-between text-sm border-b pb-2 last:border-0 last:pb-0"},[r("div",xe,[r("p",ge,l(a.client_name),1),r("p",pe,l(a.order_count)+" order"+l(a.order_count!==1?"s":""),1),r("p",ke," From week "+l(a.earliest_week)+", "+l(a.earliest_year),1)]),r("div",ye," €"+l(a.total.toFixed(2)),1)]))),128)),n.preOrders.length===0?(i(),c("div",he," No pre-orders ")):h("",!0)])]),_:1})]),_:1})]),n.recentNotes.length>0?(i(),W(e(m),{key:0},{default:o(()=>[t(e(_),null,{default:o(()=>[t(e(x),{class:"flex items-center gap-2"},{default:o(()=>[t(e(Q),{class:"h-5 w-5"}),s[16]||(s[16]=d(" Recent Client Notes ",-1))]),_:1}),t(e(w),null,{default:o(()=>[...s[17]||(s[17]=[d("Notes from the last 7 days",-1)])]),_:1})]),_:1}),t(e(f),null,{default:o(()=>[r("div",be,[(i(!0),c(k,null,b(n.recentNotes,(a,p)=>(i(),c("div",{key:p,class:"border-l-2 border-primary pl-4 py-2"},[r("div",we,[r("p",ve,l(a.client_name),1),r("span",Ce,l(a.created_at),1)]),r("p",Oe,'"'+l(a.notes)+'"',1),r("p",qe,l(a.menu_label),1)]))),128))])]),_:1})]),_:1})):h("",!0)])]),_:1})],64))}});export{He as default};
