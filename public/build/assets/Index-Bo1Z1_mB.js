import{d as Z,q as ee,j as v,c as p,s as ue,b as o,a as t,f as b,u as e,w as l,g as n,G as T,t as d,o as m,l as de,z as me,h as fe,e as C,T as ce,H as pe,J as ge,F as q,r as Q,i as j}from"./app-DujlMToZ.js";import{_ as ve}from"./AppLayout.vue_vue_type_script_setup_true_lang-DI-4sE1T.js";import{c as be,_ as $}from"./index-COZ9yg7p.js";import{_ as D,a as G}from"./Label.vue_vue_type_script_setup_true_lang-DMcM0mYD.js";import{_ as ye}from"./Textarea.vue_vue_type_script_setup_true_lang-_qwRw5_1.js";import{_ as _e,a as xe,b as $e,c as we,d as K}from"./SelectValue.vue_vue_type_script_setup_true_lang-DDVscWms.js";import{_ as ke,a as W,b as he,c as k}from"./TableCell.vue_vue_type_script_setup_true_lang-AnhFTQiH.js";import{_ as Me}from"./DialogFooter.vue_vue_type_script_setup_true_lang-kLBKUySP.js";import{X as Ce}from"./x-CH5-w-XS.js";import{_ as I,a as N,b as F,c as L,d as P}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CKHYshh8.js";import{_ as Se,a as Ve,b as Ue,c as H,d as z}from"./Toast.vue_vue_type_script_setup_true_lang-BfQQuZ46.js";import{S as De}from"./search-BZVoNidW.js";import{I as Te}from"./image-off-NVRcu-dQ.js";import"./Presence-4L55fpup.js";import"./VisuallyHidden-yGDzxEwe.js";import"./index-B8We5vQ-.js";import"./shopping-bag-BLC-eryW.js";import"./check-CTUvkM7p.js";import"./useFormControl-DemUTOc3.js";const je=be("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Ie={class:"grid gap-4"},Ne={class:"grid gap-2"},Fe={key:0,class:"text-sm text-red-500"},Le={class:"grid gap-2"},Pe={key:0,class:"text-sm text-red-500"},ze={class:"grid gap-2"},Ae={key:0,class:"text-sm text-red-500"},Be={class:"grid gap-2"},Ee={key:0,class:"text-sm text-red-500"},qe={class:"grid gap-2"},He={key:0,class:"space-y-2"},Ge={class:"relative w-full max-w-md rounded-lg overflow-hidden border"},Oe=["src"],Je={class:"flex items-center justify-center w-full"},Re={for:"image",class:"flex flex-col items-center justify-center w-full h-32 border-2 border-dashed rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800"},Xe={class:"flex flex-col items-center justify-center pt-5 pb-6"},Qe={class:"mb-2 text-sm text-gray-500"},Ke={class:"font-semibold"},We={key:1,class:"text-sm text-red-500"},Y=Z({__name:"FormMenu",props:{menu:{},submitUrl:{},method:{}},emits:["success"],setup(u,{emit:_}){const g=u,A=_,r=ee({label:g.menu.label||"",description:g.menu.description||"",price:g.menu.price||0,menutype:g.menu.menutype||"normal",image:null,delete_image:!1}),x=v(g.menu.image_url||null),S=v(g.menu.has_image),h=y=>{const f=y.target.files?.[0];f&&(r.image=f,r.delete_image=!1,x.value=URL.createObjectURL(f))},M=()=>{r.image=null,x.value=null,g.method==="put"&&S.value&&(r.delete_image=!0);const y=document.getElementById("image");y&&(y.value="")},w=()=>{const y=(g.method==="post","post"),a=g.method==="put"?`${g.submitUrl}?_method=PUT`:g.submitUrl;r[y](a,{onSuccess:()=>{A("success"),r.reset(),x.value=null}})};return(y,a)=>(m(),p("form",{onSubmit:ue(w,["prevent"]),class:"space-y-4"},[o("div",Ie,[o("div",Ne,[t(e(D),{for:"label"},{default:l(()=>[...a[4]||(a[4]=[n("Label *",-1)])]),_:1}),t(e(G),{id:"label",modelValue:e(r).label,"onUpdate:modelValue":a[0]||(a[0]=f=>e(r).label=f),type:"text",required:"",class:T({"border-red-500":e(r).errors.label})},null,8,["modelValue","class"]),e(r).errors.label?(m(),p("span",Fe,d(e(r).errors.label),1)):b("",!0)]),o("div",Le,[t(e(D),{for:"description"},{default:l(()=>[...a[5]||(a[5]=[n("Description",-1)])]),_:1}),t(e(ye),{id:"description",modelValue:e(r).description,"onUpdate:modelValue":a[1]||(a[1]=f=>e(r).description=f),rows:"3",class:T({"border-red-500":e(r).errors.description})},null,8,["modelValue","class"]),e(r).errors.description?(m(),p("span",Pe,d(e(r).errors.description),1)):b("",!0)]),o("div",ze,[t(e(D),{for:"price"},{default:l(()=>[...a[6]||(a[6]=[n("Price (€) *",-1)])]),_:1}),t(e(G),{id:"price",modelValue:e(r).price,"onUpdate:modelValue":a[2]||(a[2]=f=>e(r).price=f),type:"number",step:"0.01",min:"0",required:"",class:T({"border-red-500":e(r).errors.price})},null,8,["modelValue","class"]),e(r).errors.price?(m(),p("span",Ae,d(e(r).errors.price),1)):b("",!0)]),o("div",Be,[t(e(D),{for:"menutype"},{default:l(()=>[...a[7]||(a[7]=[n("Menu Type *",-1)])]),_:1}),t(e(_e),{modelValue:e(r).menutype,"onUpdate:modelValue":a[3]||(a[3]=f=>e(r).menutype=f),required:""},{default:l(()=>[t(e(xe),{id:"menutype",class:T({"border-red-500":e(r).errors.menutype})},{default:l(()=>[t(e($e),{placeholder:"Select menu type"})]),_:1},8,["class"]),t(e(we),null,{default:l(()=>[t(e(K),{value:"normal"},{default:l(()=>[...a[8]||(a[8]=[n("Normal",-1)])]),_:1}),t(e(K),{value:"menuset"},{default:l(()=>[...a[9]||(a[9]=[n("Menu Set",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(r).errors.menutype?(m(),p("span",Ee,d(e(r).errors.menutype),1)):b("",!0)]),o("div",qe,[t(e(D),{for:"image"},{default:l(()=>[...a[10]||(a[10]=[n("Image",-1)])]),_:1}),x.value?(m(),p("div",He,[o("div",Ge,[o("img",{src:x.value,alt:"Preview",class:"w-full h-auto object-cover"},null,8,Oe),o("button",{type:"button",onClick:M,class:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-2 hover:bg-red-600 shadow-lg"},[t(e(Ce),{class:"h-4 w-4"})])]),a[11]||(a[11]=o("p",{class:"text-xs text-muted-foreground"},"Click the X button to remove or upload a new image to replace",-1))])):b("",!0),o("div",Je,[o("label",Re,[o("div",Xe,[t(e(je),{class:"w-8 h-8 mb-2 text-gray-500"}),o("p",Qe,[o("span",Ke,"Click to "+d(x.value?"replace":"upload"),1),a[12]||(a[12]=n(" or drag and drop ",-1))]),a[13]||(a[13]=o("p",{class:"text-xs text-gray-500"},"JPG, PNG up to 5MB (will be resized to fit 800x600)",-1))]),o("input",{id:"image",type:"file",class:"hidden",accept:"image/jpeg,image/jpg,image/png",onChange:h},null,32)])]),e(r).errors.image?(m(),p("span",We,d(e(r).errors.image),1)):b("",!0)])]),t(e(Me),{class:"gap-2"},{default:l(()=>[t(e(ke),{"as-child":""},{default:l(()=>[t(e($),{type:"button",variant:"secondary"},{default:l(()=>[...a[14]||(a[14]=[n(" Cancel ",-1)])]),_:1})]),_:1}),t(e($),{type:"submit",disabled:e(r).processing},{default:l(()=>[n(d(u.method==="post"?"Create Menu":"Update Menu"),1)]),_:1},8,["disabled"])]),_:1})],32))}}),Ye={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},Ze={class:"flex items-center justify-between"},et={class:"flex gap-4"},tt={class:"relative flex-1 max-w-sm"},st={class:"rounded-md border"},lt=["onClick"],at=["src","alt"],nt={key:1,class:"w-16 h-16 rounded bg-gray-100 flex items-center justify-center"},ot={class:"flex justify-end gap-2"},rt={key:0,class:"flex items-center justify-between gap-2"},it={class:"text-sm text-muted-foreground hidden sm:block"},ut={class:"flex sm:hidden items-center gap-2 ml-auto"},dt={class:"text-sm font-medium px-2"},mt={class:"hidden sm:flex gap-2"},ft={class:"flex items-center justify-center"},ct=["src","alt"],pt={class:"flex justify-end gap-2 mt-6"},Nt=Z({__name:"Index",props:{menus:{default:()=>({data:[],current_page:1,last_page:1,per_page:10,total:0,links:[]})},filters:{default:()=>({search:"",menutype:"",sort:"created_at",direction:"desc"})}},setup(u){const _=u,g=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Menu's",href:"/admin/menus"}],A=de(),r=v(!1),x=v(""),S=v("success"),h=v(!1),M=v(!1),w=v(!1),y=v(!1),a=v(null),f=v(null),V=v(_.filters?.search||""),U=v(_.filters?.menutype||"");let O;const te={id:0,label:null,description:null,price:null,menutype:"normal",image_url:null,has_image:!1},J=ee({}),se=()=>{h.value=!0},le=c=>{a.value=c,M.value=!0},ae=c=>{a.value=c,w.value=!0},ne=c=>{f.value=c,y.value=!0},R=()=>{h.value=!1,M.value=!1},oe=()=>{a.value&&J.delete(`/admin/menus/${a.value.id}`,{onSuccess:()=>{w.value=!1}})},B=c=>{c&&j.visit(c)},re=()=>{clearTimeout(O),O=setTimeout(()=>{j.get("/admin/menus",{search:V.value,menutype:U.value,sort:_.filters?.sort,direction:_.filters?.direction},{preserveState:!0,preserveScroll:!0})},300)},ie=()=>{j.get("/admin/menus",{search:V.value,menutype:U.value,sort:_.filters?.sort,direction:_.filters?.direction},{preserveState:!0,preserveScroll:!0})},X=c=>{let s="asc";_.filters?.sort===c&&_.filters?.direction==="asc"&&(s="desc"),j.get("/admin/menus",{search:V.value,menutype:U.value,sort:c,direction:s},{preserveState:!0,preserveScroll:!0})};return me(()=>A.props.flash,c=>{c?.success&&(S.value="success",x.value=c.success,r.value=!0,setTimeout(()=>{r.value=!1},3e3)),c?.error&&(S.value="destructive",x.value=c.error,r.value=!0,setTimeout(()=>{r.value=!1},3e3))},{deep:!0}),(c,s)=>(m(),p(q,null,[t(e(fe),{title:"Menus"}),t(ce,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:l(()=>[r.value?(m(),C(Se,{key:0,variant:S.value,position:"top-right"},{default:l(()=>[n(d(x.value),1)]),_:1},8,["variant"])):b("",!0)]),_:1}),t(ve,{breadcrumbs:g},{default:l(()=>[o("div",Ye,[o("div",Ze,[s[10]||(s[10]=o("h2",{class:"text-2xl font-bold"},"Menu List",-1)),t(e($),{onClick:se},{default:l(()=>[...s[9]||(s[9]=[n("Add Menu",-1)])]),_:1})]),o("div",et,[o("div",tt,[t(e(De),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(G),{modelValue:V.value,"onUpdate:modelValue":s[0]||(s[0]=i=>V.value=i),onInput:re,type:"search",placeholder:"Search menus...",class:"pl-9"},null,8,["modelValue"])]),pe(o("select",{"onUpdate:modelValue":s[1]||(s[1]=i=>U.value=i),onChange:ie,class:"h-10 w-[180px] rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"},[...s[11]||(s[11]=[o("option",{value:""},"All Types",-1),o("option",{value:"normal"},"Normal",-1),o("option",{value:"menuset"},"Menu Set",-1)])],544),[[ge,U.value]])]),o("div",st,[t(e(Ve),null,{default:l(()=>[t(e(Ue),null,{default:l(()=>[t(e(H),null,{default:l(()=>[t(e(z),{class:"w-20"},{default:l(()=>[...s[12]||(s[12]=[n("Image",-1)])]),_:1}),t(e(W),{"sort-key":"label","current-sort":u.filters?.sort,"current-direction":u.filters?.direction,onSort:X},{default:l(()=>[...s[13]||(s[13]=[n(" Label ",-1)])]),_:1},8,["current-sort","current-direction"]),t(e(z),null,{default:l(()=>[...s[14]||(s[14]=[n("Description",-1)])]),_:1}),t(e(W),{"sort-key":"price","current-sort":u.filters?.sort,"current-direction":u.filters?.direction,onSort:X},{default:l(()=>[...s[15]||(s[15]=[n(" Price ",-1)])]),_:1},8,["current-sort","current-direction"]),t(e(z),null,{default:l(()=>[...s[16]||(s[16]=[n("Type",-1)])]),_:1}),t(e(z),{class:"text-right"},{default:l(()=>[...s[17]||(s[17]=[n("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(e(he),null,{default:l(()=>[u.menus.data.length===0?(m(),C(e(H),{key:0},{default:l(()=>[t(e(k),{colspan:"6",class:"text-center text-muted-foreground"},{default:l(()=>[...s[18]||(s[18]=[n(" No menus found. Add your first menu to get started. ",-1)])]),_:1})]),_:1})):b("",!0),(m(!0),p(q,null,Q(u.menus.data,i=>(m(),C(e(H),{key:i.id},{default:l(()=>[t(e(k),null,{default:l(()=>[i.has_image&&i.image_url?(m(),p("div",{key:0,class:"w-16 h-16 rounded overflow-hidden cursor-pointer hover:opacity-80 transition-opacity",onClick:E=>ne(i)},[o("img",{src:i.image_url,alt:i.label||"Menu",class:"w-full h-full object-cover"},null,8,at)],8,lt)):(m(),p("div",nt,[t(e(Te),{class:"h-6 w-6 text-gray-400"})]))]),_:2},1024),t(e(k),{class:"font-medium"},{default:l(()=>[n(d(i.label??"-"),1)]),_:2},1024),t(e(k),{class:"max-w-xs truncate"},{default:l(()=>[n(d(i.description??"-"),1)]),_:2},1024),t(e(k),null,{default:l(()=>[n("€"+d(Number(i.price).toFixed(2)),1)]),_:2},1024),t(e(k),null,{default:l(()=>[o("span",{class:T(["inline-flex items-center rounded-full px-2 py-1 text-xs font-medium",i.menutype==="menuset"?"bg-blue-50 text-blue-700 ring-1 ring-inset ring-blue-600/20":"bg-gray-50 text-gray-600 ring-1 ring-inset ring-gray-500/10"])},d(i.menutype==="menuset"?"Menu Set":"Normal"),3)]),_:2},1024),t(e(k),{class:"text-right"},{default:l(()=>[o("div",ot,[t(e($),{variant:"outline",size:"sm",onClick:E=>le(i)},{default:l(()=>[...s[19]||(s[19]=[n(" Edit ",-1)])]),_:1},8,["onClick"]),t(e($),{variant:"destructive",size:"sm",onClick:E=>ae(i)},{default:l(()=>[...s[20]||(s[20]=[n(" Delete ",-1)])]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),u.menus.last_page>1?(m(),p("div",rt,[o("div",it," Showing "+d((u.menus.current_page-1)*u.menus.per_page+1)+" to "+d(Math.min(u.menus.current_page*u.menus.per_page,u.menus.total))+" of "+d(u.menus.total)+" menus ",1),o("div",ut,[t(e($),{variant:"outline",size:"sm",disabled:u.menus.current_page===1,onClick:s[2]||(s[2]=i=>B(u.menus.links[0]?.url))},{default:l(()=>[...s[21]||(s[21]=[n(" ← ",-1)])]),_:1},8,["disabled"]),o("span",dt,d(u.menus.current_page)+" / "+d(u.menus.last_page),1),t(e($),{variant:"outline",size:"sm",disabled:u.menus.current_page===u.menus.last_page,onClick:s[3]||(s[3]=i=>B(u.menus.links[u.menus.links.length-1]?.url))},{default:l(()=>[...s[22]||(s[22]=[n(" → ",-1)])]),_:1},8,["disabled"])]),o("div",mt,[(m(!0),p(q,null,Q(u.menus.links,i=>(m(),C(e($),{key:i.label,variant:i.active?"default":"outline",size:"sm",disabled:!i.url,onClick:E=>B(i.url),innerHTML:i.label},null,8,["variant","disabled","onClick","innerHTML"]))),128))])])):b("",!0),t(e(I),{open:y.value,"onUpdate:open":s[4]||(s[4]=i=>y.value=i)},{default:l(()=>[t(e(N),{class:"max-w-4xl"},{default:l(()=>[t(e(F),null,{default:l(()=>[t(e(L),null,{default:l(()=>[n(d(f.value?.label),1)]),_:1}),f.value?.description?(m(),C(e(P),{key:0},{default:l(()=>[n(d(f.value.description),1)]),_:1})):b("",!0)]),_:1}),o("div",ft,[f.value?.image_url?(m(),p("img",{key:0,src:f.value.image_url,alt:f.value.label||"Menu",class:"max-w-full max-h-[70vh] rounded-lg"},null,8,ct)):b("",!0)])]),_:1})]),_:1},8,["open"]),t(e(I),{open:h.value,"onUpdate:open":s[5]||(s[5]=i=>h.value=i)},{default:l(()=>[t(e(N),{class:"max-w-2xl max-h-[90vh] overflow-y-auto"},{default:l(()=>[t(e(F),null,{default:l(()=>[t(e(L),null,{default:l(()=>[...s[23]||(s[23]=[n("Add New Menu",-1)])]),_:1}),t(e(P),null,{default:l(()=>[...s[24]||(s[24]=[n(" Create a new menu item. ",-1)])]),_:1})]),_:1}),t(Y,{menu:te,"submit-url":"/admin/menus",method:"post",onSuccess:R})]),_:1})]),_:1},8,["open"]),t(e(I),{open:M.value,"onUpdate:open":s[6]||(s[6]=i=>M.value=i)},{default:l(()=>[t(e(N),{class:"max-w-2xl max-h-[90vh] overflow-y-auto"},{default:l(()=>[t(e(F),null,{default:l(()=>[t(e(L),null,{default:l(()=>[...s[25]||(s[25]=[n("Edit Menu",-1)])]),_:1}),t(e(P),null,{default:l(()=>[...s[26]||(s[26]=[n(" Update the menu information. ",-1)])]),_:1})]),_:1}),a.value?(m(),C(Y,{key:0,menu:a.value,"submit-url":`/admin/menus/${a.value.id}`,method:"put",onSuccess:R},null,8,["menu","submit-url"])):b("",!0)]),_:1})]),_:1},8,["open"]),t(e(I),{open:w.value,"onUpdate:open":s[8]||(s[8]=i=>w.value=i)},{default:l(()=>[t(e(N),null,{default:l(()=>[t(e(F),{class:"space-y-3"},{default:l(()=>[t(e(L),null,{default:l(()=>[...s[27]||(s[27]=[n("Delete Menu",-1)])]),_:1}),t(e(P),null,{default:l(()=>[s[28]||(s[28]=n(" Are you sure you want to delete ",-1)),o("strong",null,d(a.value?.label),1),s[29]||(s[29]=n("? This action cannot be undone. ",-1))]),_:1})]),_:1}),o("div",pt,[t(e($),{type:"button",variant:"secondary",onClick:s[7]||(s[7]=i=>w.value=!1)},{default:l(()=>[...s[30]||(s[30]=[n(" Cancel ",-1)])]),_:1}),t(e($),{variant:"destructive",disabled:e(J).processing,onClick:oe},{default:l(()=>[...s[31]||(s[31]=[n(" Delete Menu ",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["open"])])]),_:1})],64))}});export{Nt as default};
