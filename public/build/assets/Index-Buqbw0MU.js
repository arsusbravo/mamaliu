import{d as O,v as R,c as p,x as ae,b as d,a as t,f as g,u as e,w as s,g as o,H as h,t as f,F as T,r as P,I as le,J as re,o as m,e as k,l as oe,j as x,B as ne,h as ie,T as ue,i as A}from"./app-DTGQeK2P.js";import{_ as de}from"./AppLayout.vue_vue_type_script_setup_true_lang-Dcvxksj8.js";import{_ as y}from"./index-BvVEoErb.js";import{_ as w,a as D}from"./Label.vue_vue_type_script_setup_true_lang-DwAlg_3-.js";import{_ as me,a as fe,b as ce,c as pe,d as ve}from"./SelectValue.vue_vue_type_script_setup_true_lang-857hP1Bq.js";import{_ as ge,a as J,b as _e,c as S}from"./TableCell.vue_vue_type_script_setup_true_lang-zjafrhxw.js";import{_ as xe}from"./DialogFooter.vue_vue_type_script_setup_true_lang-EO4yNlr9.js";import{_ as E,a as F,b as M,c as j,d as q}from"./DialogTitle.vue_vue_type_script_setup_true_lang-YqLOvEei.js";import{_ as ye,a as be,b as $e,c as B,d as Q}from"./Toast.vue_vue_type_script_setup_true_lang-o6hOGb-z.js";import{S as we}from"./search-CdKFv2Le.js";import"./Presence-DOdkaArE.js";import"./x-BxN59Ura.js";import"./VisuallyHidden-MyUaASOh.js";import"./index-B8We5vQ-.js";import"./shopping-bag-C2bkzHxh.js";import"./check-DphPfU_Y.js";import"./useFormControl-246oLB57.js";const ke={class:"grid gap-4"},Ce={class:"grid gap-2"},Ve={key:0,class:"text-sm text-red-500"},he={class:"grid gap-2"},Se={key:0,class:"text-sm text-red-500"},De={class:"grid gap-2"},Ue={key:0,class:"text-sm text-red-500"},Te={class:"grid gap-2"},Ne={key:0,class:"text-sm text-red-500"},Ae={class:"flex items-center space-x-2"},Ee={key:0,class:"text-sm text-red-500 ml-2"},Fe={class:"grid gap-2"},Me={key:0,class:"text-sm text-red-500"},K=O({__name:"FormClient",props:{client:{},groups:{},submitUrl:{},method:{}},emits:["success"],setup(n,{emit:b}){const v=n,N=b,l=R({name:v.client.name||"",phone:v.client.phone||"",username:v.client.username||"",group_id:v.client.group_id?String(v.client.group_id):"",active:v.client.active,password:""}),C=()=>{const $=v.method==="post"?"post":"put",r={...l.data(),group_id:l.group_id?Number(l.group_id):null};l.transform(()=>r)[$](v.submitUrl,{onSuccess:()=>{N("success"),l.reset()}})};return($,r)=>(m(),p("form",{onSubmit:ae(C,["prevent"]),class:"space-y-4"},[d("div",ke,[d("div",Ce,[t(e(w),{for:"name"},{default:s(()=>[...r[6]||(r[6]=[o("Name *",-1)])]),_:1}),t(e(D),{id:"name",modelValue:e(l).name,"onUpdate:modelValue":r[0]||(r[0]=u=>e(l).name=u),type:"text",required:"",class:h({"border-red-500":e(l).errors.name})},null,8,["modelValue","class"]),e(l).errors.name?(m(),p("span",Ve,f(e(l).errors.name),1)):g("",!0)]),d("div",he,[t(e(w),{for:"username"},{default:s(()=>[...r[7]||(r[7]=[o("Email *",-1)])]),_:1}),t(e(D),{id:"username",modelValue:e(l).username,"onUpdate:modelValue":r[1]||(r[1]=u=>e(l).username=u),type:"email",required:"",class:h({"border-red-500":e(l).errors.username})},null,8,["modelValue","class"]),e(l).errors.username?(m(),p("span",Se,f(e(l).errors.username),1)):g("",!0)]),d("div",De,[t(e(w),{for:"phone"},{default:s(()=>[...r[8]||(r[8]=[o("Phone",-1)])]),_:1}),t(e(D),{id:"phone",modelValue:e(l).phone,"onUpdate:modelValue":r[2]||(r[2]=u=>e(l).phone=u),type:"text",class:h({"border-red-500":e(l).errors.phone})},null,8,["modelValue","class"]),e(l).errors.phone?(m(),p("span",Ue,f(e(l).errors.phone),1)):g("",!0)]),d("div",Te,[t(e(w),{for:"group"},{default:s(()=>[...r[9]||(r[9]=[o("Group *",-1)])]),_:1}),t(e(me),{modelValue:e(l).group_id,"onUpdate:modelValue":r[3]||(r[3]=u=>e(l).group_id=u),required:""},{default:s(()=>[t(e(fe),{id:"group",class:h({"border-red-500":e(l).errors.group_id})},{default:s(()=>[t(e(ce),{placeholder:"Select a group"})]),_:1},8,["class"]),t(e(pe),null,{default:s(()=>[(m(!0),p(T,null,P(n.groups,u=>(m(),k(e(ve),{key:u.id,value:String(u.id)},{default:s(()=>[o(f(u.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["modelValue"]),e(l).errors.group_id?(m(),p("span",Ne,f(e(l).errors.group_id),1)):g("",!0)]),d("div",Ae,[le(d("input",{id:"active",type:"checkbox","onUpdate:modelValue":r[4]||(r[4]=u=>e(l).active=u),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[re,e(l).active]]),t(e(w),{for:"active",class:"text-sm font-medium leading-none cursor-pointer"},{default:s(()=>[...r[10]||(r[10]=[o(" Active ",-1)])]),_:1}),e(l).errors.active?(m(),p("span",Ee,f(e(l).errors.active),1)):g("",!0)]),d("div",Fe,[t(e(w),{for:"password"},{default:s(()=>[o(" Password "+f(n.method==="put"?"(leave blank to keep current)":"*"),1)]),_:1}),t(e(D),{id:"password",modelValue:e(l).password,"onUpdate:modelValue":r[5]||(r[5]=u=>e(l).password=u),type:"password",required:n.method==="post",class:h({"border-red-500":e(l).errors.password})},null,8,["modelValue","required","class"]),e(l).errors.password?(m(),p("span",Me,f(e(l).errors.password),1)):g("",!0)])]),t(e(xe),{class:"gap-2"},{default:s(()=>[t(e(ge),{"as-child":""},{default:s(()=>[t(e(y),{type:"button",variant:"secondary"},{default:s(()=>[...r[11]||(r[11]=[o(" Cancel ",-1)])]),_:1})]),_:1}),t(e(y),{type:"submit",disabled:e(l).processing},{default:s(()=>[o(f(n.method==="post"?"Create Client":"Update Client"),1)]),_:1},8,["disabled"])]),_:1})],32))}}),je={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},qe={class:"flex items-center justify-between"},Be={class:"relative max-w-sm"},Pe={class:"rounded-md border"},ze={class:"flex justify-end gap-2"},He={key:0,class:"flex items-center justify-between"},Ie={class:"text-sm text-muted-foreground"},Le={class:"flex gap-2"},Ge={class:"flex justify-end gap-2 mt-6"},it=O({__name:"Index",props:{clients:{default:()=>({data:[],current_page:1,last_page:1,per_page:10,total:0,links:[]})},groups:{default:()=>[]},filters:{default:()=>({search:"",sort:"created_at",direction:"desc"})}},setup(n){const b=n,v=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Clients",href:"/admin/clients"}],N=oe(),l=x(!1),C=x(""),$=x("success"),r=x(!1),u=x(!1),V=x(!1),_=x(null),U=x(b.filters?.search||"");let z;const W={id:0,name:null,phone:null,username:null,group_id:null,active:!0},H=R({}),X=()=>{r.value=!0},Y=c=>{_.value=c,u.value=!0},Z=c=>{_.value=c,V.value=!0},I=()=>{r.value=!1,u.value=!1},ee=()=>{_.value&&H.delete(`/admin/clients/${_.value.id}`,{onSuccess:()=>{V.value=!1}})},te=c=>{c&&A.visit(c)},se=()=>{clearTimeout(z),z=setTimeout(()=>{A.get("/admin/clients",{search:U.value,sort:b.filters?.sort,direction:b.filters?.direction},{preserveState:!0,preserveScroll:!0})},300)},L=c=>{let a="asc";b.filters?.sort===c&&b.filters?.direction==="asc"&&(a="desc"),A.get("/admin/clients",{search:U.value,sort:c,direction:a},{preserveState:!0,preserveScroll:!0})};return ne(()=>N.props.flash,c=>{c?.success&&($.value="success",C.value=c.success,l.value=!0,setTimeout(()=>{l.value=!1},3e3)),c?.error&&($.value="destructive",C.value=c.error,l.value=!0,setTimeout(()=>{l.value=!1},3e3))},{deep:!0}),(c,a)=>(m(),p(T,null,[t(e(ie),{title:"Clients"}),t(ue,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:s(()=>[l.value?(m(),k(ye,{key:0,variant:$.value,position:"top-right"},{default:s(()=>[o(f(C.value),1)]),_:1},8,["variant"])):g("",!0)]),_:1}),t(de,{breadcrumbs:v},{default:s(()=>[d("div",je,[d("div",qe,[a[6]||(a[6]=d("h2",{class:"text-2xl font-bold"},"Clients",-1)),t(e(y),{onClick:X},{default:s(()=>[...a[5]||(a[5]=[o("Add Client",-1)])]),_:1})]),d("div",Be,[t(e(we),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),t(e(D),{modelValue:U.value,"onUpdate:modelValue":a[0]||(a[0]=i=>U.value=i),onInput:se,type:"search",placeholder:"Search clients...",class:"pl-9"},null,8,["modelValue"])]),d("div",Pe,[t(e(be),null,{default:s(()=>[t(e($e),null,{default:s(()=>[t(e(B),null,{default:s(()=>[t(e(J),{"sort-key":"name","current-sort":n.filters?.sort,"current-direction":n.filters?.direction,onSort:L},{default:s(()=>[...a[7]||(a[7]=[o(" Name ",-1)])]),_:1},8,["current-sort","current-direction"]),t(e(J),{"sort-key":"username","current-sort":n.filters?.sort,"current-direction":n.filters?.direction,onSort:L},{default:s(()=>[...a[8]||(a[8]=[o(" Email ",-1)])]),_:1},8,["current-sort","current-direction"]),t(e(Q),null,{default:s(()=>[...a[9]||(a[9]=[o("Phone",-1)])]),_:1}),t(e(Q),{class:"text-right"},{default:s(()=>[...a[10]||(a[10]=[o("Actions",-1)])]),_:1})]),_:1})]),_:1}),t(e(_e),null,{default:s(()=>[n.clients.data.length===0?(m(),k(e(B),{key:0},{default:s(()=>[t(e(S),{colspan:"5",class:"text-center text-muted-foreground"},{default:s(()=>[...a[11]||(a[11]=[o(" No clients found. Add your first client to get started. ",-1)])]),_:1})]),_:1})):g("",!0),(m(!0),p(T,null,P(n.clients.data,i=>(m(),k(e(B),{key:i.id},{default:s(()=>[t(e(S),{class:"font-medium"},{default:s(()=>[o(f(i.name??"-"),1)]),_:2},1024),t(e(S),null,{default:s(()=>[o(f(i.username??"-"),1)]),_:2},1024),t(e(S),null,{default:s(()=>[o(f(i.phone??"-"),1)]),_:2},1024),t(e(S),{class:"text-right"},{default:s(()=>[d("div",ze,[t(e(y),{variant:"outline",size:"sm",onClick:G=>Y(i)},{default:s(()=>[...a[12]||(a[12]=[o(" Edit ",-1)])]),_:1},8,["onClick"]),t(e(y),{variant:"destructive",size:"sm",onClick:G=>Z(i)},{default:s(()=>[...a[13]||(a[13]=[o(" Delete ",-1)])]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),n.clients.last_page>1?(m(),p("div",He,[d("div",Ie," Showing "+f((n.clients.current_page-1)*n.clients.per_page+1)+" to "+f(Math.min(n.clients.current_page*n.clients.per_page,n.clients.total))+" of "+f(n.clients.total)+" clients ",1),d("div",Le,[(m(!0),p(T,null,P(n.clients.links,i=>(m(),k(e(y),{key:i.label,variant:i.active?"default":"outline",size:"sm",disabled:!i.url,onClick:G=>te(i.url),innerHTML:i.label},null,8,["variant","disabled","onClick","innerHTML"]))),128))])])):g("",!0),t(e(E),{open:r.value,"onUpdate:open":a[1]||(a[1]=i=>r.value=i)},{default:s(()=>[t(e(F),{class:"max-w-2xl max-h-[90vh] overflow-y-auto"},{default:s(()=>[t(e(M),null,{default:s(()=>[t(e(j),null,{default:s(()=>[...a[14]||(a[14]=[o("Add New Client",-1)])]),_:1}),t(e(q),null,{default:s(()=>[...a[15]||(a[15]=[o(" Fill in the client information below. ",-1)])]),_:1})]),_:1}),t(K,{client:W,groups:n.groups,"submit-url":"/admin/clients",method:"post",onSuccess:I},null,8,["groups"])]),_:1})]),_:1},8,["open"]),t(e(E),{open:u.value,"onUpdate:open":a[2]||(a[2]=i=>u.value=i)},{default:s(()=>[t(e(F),{class:"max-w-2xl max-h-[90vh] overflow-y-auto"},{default:s(()=>[t(e(M),null,{default:s(()=>[t(e(j),null,{default:s(()=>[...a[16]||(a[16]=[o("Edit Client",-1)])]),_:1}),t(e(q),null,{default:s(()=>[...a[17]||(a[17]=[o(" Update the client information below. ",-1)])]),_:1})]),_:1}),_.value?(m(),k(K,{key:0,client:_.value,groups:n.groups,"submit-url":`/admin/clients/${_.value.id}`,method:"put",onSuccess:I},null,8,["client","groups","submit-url"])):g("",!0)]),_:1})]),_:1},8,["open"]),t(e(E),{open:V.value,"onUpdate:open":a[4]||(a[4]=i=>V.value=i)},{default:s(()=>[t(e(F),null,{default:s(()=>[t(e(M),{class:"space-y-3"},{default:s(()=>[t(e(j),null,{default:s(()=>[...a[18]||(a[18]=[o("Delete Client",-1)])]),_:1}),t(e(q),null,{default:s(()=>[a[19]||(a[19]=o(" Are you sure you want to delete ",-1)),d("strong",null,f(_.value?.name),1),a[20]||(a[20]=o("? This action cannot be undone. ",-1))]),_:1})]),_:1}),d("div",Ge,[t(e(y),{type:"button",variant:"secondary",onClick:a[3]||(a[3]=i=>V.value=!1)},{default:s(()=>[...a[21]||(a[21]=[o(" Cancel ",-1)])]),_:1}),t(e(y),{variant:"destructive",disabled:e(H).processing,onClick:ee},{default:s(()=>[...a[22]||(a[22]=[o(" Delete Client ",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["open"])])]),_:1})],64))}});export{it as default};
