import{d as I,j as f,c as x,a as o,u as s,h as S,w as l,b as a,g as n,o as r,F as _,r as V,t as c,H as A,e as v,f as L,i as w}from"./app-ij6owHZq.js";import{_ as F}from"./AppLayout.vue_vue_type_script_setup_true_lang-z_mG9-OY.js";import{c as N,_ as m}from"./index-B7rlVD1z.js";import{_ as z,a as B}from"./Label.vue_vue_type_script_setup_true_lang-TeClRliU.js";import{_ as E,a as j,b as P,c as U,d as O}from"./DialogTitle.vue_vue_type_script_setup_true_lang-CjHiwey8.js";import{P as G}from"./plus-Btpzw593.js";import{C as H}from"./check-DlVll61i.js";import"./Presence-CfUu96mN.js";import"./x-Bazv7jjO.js";import"./VisuallyHidden-DSxVYhUa.js";import"./index-B8We5vQ-.js";import"./shopping-bag-BhhUFtw1.js";const M=N("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),q={class:"p-6"},J={class:"flex items-center justify-between mb-6"},K={class:"bg-white rounded-lg shadow overflow-hidden"},Q={class:"min-w-full divide-y divide-gray-200"},R={class:"bg-white divide-y divide-gray-200"},W={class:"px-6 py-4 whitespace-nowrap text-xs font-mono"},X={class:"px-6 py-4 whitespace-nowrap"},Y={class:"px-6 py-4 whitespace-nowrap text-sm"},Z={class:"px-6 py-4 whitespace-nowrap text-sm"},tt={class:"px-6 py-4 whitespace-nowrap text-sm"},et={class:"flex gap-2"},at={class:"space-y-4"},xt=I({__name:"Index",props:{tokens:{}},setup(g){const h=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Invite Links",href:"/admin/invites"}],u=f(!1),p=f(new Date().toISOString().split("T")[0]),d=f(null),b=()=>{w.post("/admin/invites",{valid_at:p.value},{onSuccess:()=>{u.value=!1,p.value=new Date().toISOString().split("T")[0]}})},C=i=>{confirm("Are you sure you want to delete this invite?")&&w.delete(`/admin/invites/${i}`)},k=async(i,t)=>{try{if(navigator.clipboard&&navigator.clipboard.writeText)await navigator.clipboard.writeText(i),d.value=t,setTimeout(()=>{d.value=null},2e3);else{const e=document.createElement("textarea");e.value=i,e.style.position="fixed",e.style.left="-999999px",document.body.appendChild(e),e.select(),document.execCommand("copy"),document.body.removeChild(e),d.value=t,setTimeout(()=>{d.value=null},2e3)}}catch(e){console.error("Failed to copy:",e),alert("Failed to copy to clipboard. Please copy manually: "+i)}},y=i=>new Date(i).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),T=i=>{if(i.is_valid)return"bg-green-100 text-green-800";const t=new Date;return new Date(i.valid_at)>t?"bg-blue-100 text-blue-800":"bg-red-100 text-red-800"},$=i=>{if(i.is_valid)return"Valid";const t=new Date;return new Date(i.valid_at)>t?"Not yet valid":"Expired"};return(i,t)=>(r(),x(_,null,[o(s(S),{title:"Invite Links"}),o(F,{breadcrumbs:h},{default:l(()=>[a("div",q,[a("div",J,[t[4]||(t[4]=a("h1",{class:"text-2xl font-bold"},"Invite Links",-1)),o(s(m),{onClick:t[0]||(t[0]=e=>u.value=!0)},{default:l(()=>[o(s(G),{class:"h-4 w-4 mr-2"}),t[3]||(t[3]=n(" Create Invite ",-1))]),_:1})]),a("div",K,[a("table",Q,[t[6]||(t[6]=a("thead",{class:"bg-gray-50"},[a("tr",null,[a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Token"),a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Status"),a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Valid From"),a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Expires At"),a("th",{class:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase"},"Actions")])],-1)),a("tbody",R,[(r(!0),x(_,null,V(g.tokens,e=>(r(),x("tr",{key:e.id},[a("td",W,c(e.token.substring(0,16))+"... ",1),a("td",X,[a("span",{class:A([T(e),"px-2 py-1 text-xs rounded font-medium"])},c($(e)),3)]),a("td",Y,c(y(e.valid_at)),1),a("td",Z,c(y(e.expires_at)),1),a("td",tt,[a("div",et,[e.is_valid?(r(),v(s(m),{key:0,size:"sm",variant:"outline",onClick:D=>k(e.invite_url,e.id),title:"Copy registration link"},{default:l(()=>[d.value===e.id?(r(),v(s(H),{key:0,class:"h-4 w-4"})):(r(),v(s(M),{key:1,class:"h-4 w-4"}))]),_:2},1032,["onClick"])):L("",!0),o(s(m),{size:"sm",variant:"destructive",onClick:D=>C(e.id)},{default:l(()=>[...t[5]||(t[5]=[n(" Delete ",-1)])]),_:1},8,["onClick"])])])]))),128))])])])]),o(s(E),{open:u.value,"onUpdate:open":t[2]||(t[2]=e=>u.value=e)},{default:l(()=>[o(s(j),null,{default:l(()=>[o(s(P),null,{default:l(()=>[o(s(U),null,{default:l(()=>[...t[7]||(t[7]=[n("Create Invite Link",-1)])]),_:1}),o(s(O),null,{default:l(()=>[...t[8]||(t[8]=[n(" Generate a new registration invite link. Token will be valid for 3 days. ",-1)])]),_:1})]),_:1}),a("div",at,[a("div",null,[o(s(z),{for:"valid_at"},{default:l(()=>[...t[9]||(t[9]=[n("Valid From",-1)])]),_:1}),o(s(B),{id:"valid_at",modelValue:p.value,"onUpdate:modelValue":t[1]||(t[1]=e=>p.value=e),type:"date"},null,8,["modelValue"]),t[10]||(t[10]=a("p",{class:"text-xs text-gray-500 mt-1"},"Token will be valid for 3 days from this date",-1))]),o(s(m),{onClick:b,class:"w-full"},{default:l(()=>[...t[11]||(t[11]=[n("Create Invite",-1)])]),_:1})])]),_:1})]),_:1},8,["open"])]),_:1})],64))}});export{xt as default};
