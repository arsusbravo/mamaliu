import{d as J,q as K,z as O,c as y,s as ae,b as u,a as s,f as $,u as e,w as a,g as o,G as E,t as f,H as le,I as oe,o as m,l as re,j as _,h as ne,e as S,T as ue,F as G,r as P,i as T}from"./app-BDAf-W9b.js";import{_ as ie}from"./AppLayout.vue_vue_type_script_setup_true_lang-DSfSoqVI.js";import{_ as x}from"./index-CKvwsGaD.js";import{_ as U,a as B}from"./Label.vue_vue_type_script_setup_true_lang-j7dooCR3.js";import{_ as de,a as me,b as fe,c as C}from"./TableCell.vue_vue_type_script_setup_true_lang-BckhEiNX.js";import{_ as pe}from"./DialogFooter.vue_vue_type_script_setup_true_lang-Cxqi-m-f.js";import{_ as A,a as z,b as M,c as N,d as j}from"./DialogTitle.vue_vue_type_script_setup_true_lang-D0cXgSvE.js";import{_ as ce,a as ge,b as ve,c as F,d as h}from"./Toast.vue_vue_type_script_setup_true_lang-CjzRReCW.js";import{S as _e}from"./search-oEO2HwRg.js";import"./Presence-NXQYviUN.js";import"./x-C8YEPfzb.js";import"./VisuallyHidden-Cg0X2Dwk.js";import"./index-B8We5vQ-.js";import"./shopping-bag-BPID5rA5.js";const xe={class:"grid gap-4"},ye={class:"grid gap-2"},be={key:0,class:"text-sm text-red-500"},$e={class:"grid gap-2"},ke={key:0,class:"text-sm text-red-500"},we={class:"flex items-center space-x-2"},Se={key:0,class:"text-sm text-red-500 ml-2"},Q=J({__name:"FormGroup",props:{group:{},submitUrl:{},method:{}},emits:["success"],setup(i,{emit:b}){const g=i,V=b,l=K({name:g.group.name||"",slug:g.group.slug||"",active:g.group.active});O(()=>l.name,c=>{g.method==="post"&&c&&(l.slug=c.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""))});const k=()=>{const c=g.method==="post"?"post":"put";l[c](g.submitUrl,{onSuccess:()=>{V("success"),l.reset()}})};return(c,n)=>(m(),y("form",{onSubmit:ae(k,["prevent"]),class:"space-y-4"},[u("div",xe,[u("div",ye,[s(e(U),{for:"name"},{default:a(()=>[...n[3]||(n[3]=[o("Name *",-1)])]),_:1}),s(e(B),{id:"name",modelValue:e(l).name,"onUpdate:modelValue":n[0]||(n[0]=p=>e(l).name=p),type:"text",required:"",class:E({"border-red-500":e(l).errors.name})},null,8,["modelValue","class"]),e(l).errors.name?(m(),y("span",be,f(e(l).errors.name),1)):$("",!0)]),u("div",$e,[s(e(U),{for:"slug"},{default:a(()=>[...n[4]||(n[4]=[o("Slug *",-1)])]),_:1}),s(e(B),{id:"slug",modelValue:e(l).slug,"onUpdate:modelValue":n[1]||(n[1]=p=>e(l).slug=p),type:"text",required:"",class:E({"border-red-500":e(l).errors.slug})},null,8,["modelValue","class"]),e(l).errors.slug?(m(),y("span",ke,f(e(l).errors.slug),1)):$("",!0),n[5]||(n[5]=u("p",{class:"text-xs text-muted-foreground"},"Auto-generated from name, but you can customize it",-1))]),u("div",we,[le(u("input",{id:"active",type:"checkbox","onUpdate:modelValue":n[2]||(n[2]=p=>e(l).active=p),class:"h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"},null,512),[[oe,e(l).active]]),s(e(U),{for:"active",class:"text-sm font-medium leading-none cursor-pointer"},{default:a(()=>[...n[6]||(n[6]=[o(" Active ",-1)])]),_:1}),e(l).errors.active?(m(),y("span",Se,f(e(l).errors.active),1)):$("",!0)])]),s(e(pe),{class:"gap-2"},{default:a(()=>[s(e(de),{"as-child":""},{default:a(()=>[s(e(x),{type:"button",variant:"secondary"},{default:a(()=>[...n[7]||(n[7]=[o(" Cancel ",-1)])]),_:1})]),_:1}),s(e(x),{type:"submit",disabled:e(l).processing},{default:a(()=>[o(f(i.method==="post"?"Create Group":"Update Group"),1)]),_:1},8,["disabled"])]),_:1})],32))}}),Ce={class:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4"},De={class:"flex items-center justify-between"},Ve={class:"relative max-w-sm"},Ge={class:"rounded-md border"},Te={class:"flex justify-end gap-2"},Ue={key:0,class:"flex items-center justify-between"},Ae={class:"text-sm text-muted-foreground"},ze={class:"flex gap-2"},Me={class:"flex justify-end gap-2 mt-6"},Oe=J({__name:"Index",props:{groups:{default:()=>({data:[],current_page:1,last_page:1,per_page:10,total:0,links:[]})},filters:{default:()=>({search:"",sort:"created_at",direction:"desc"})}},setup(i){const b=i,g=[{title:"Dashboard",href:"/admin/dashboard"},{title:"Groups",href:"/admin/groups"}],V=re(),l=_(!1),k=_(""),c=_("success"),n=_(!1),p=_(!1),w=_(!1),v=_(null),D=_(b.filters?.search||"");let I;const R={id:0,name:null,slug:null,active:!0},L=K({}),W=()=>{n.value=!0},X=d=>{v.value=d,p.value=!0},Y=d=>{v.value=d,w.value=!0},q=()=>{n.value=!1,p.value=!1},Z=()=>{v.value&&L.delete(`/admin/groups/${v.value.id}`,{onSuccess:()=>{w.value=!1}})},ee=d=>{d&&T.visit(d)},te=()=>{clearTimeout(I),I=setTimeout(()=>{T.get("/admin/groups",{search:D.value,sort:b.filters?.sort,direction:b.filters?.direction},{preserveState:!0,preserveScroll:!0})},300)},se=d=>{let t="asc";b.filters?.sort===d&&b.filters?.direction==="asc"&&(t="desc"),T.get("/admin/groups",{search:D.value,sort:d,direction:t},{preserveState:!0,preserveScroll:!0})};return O(()=>V.props.flash,d=>{d?.success&&(c.value="success",k.value=d.success,l.value=!0,setTimeout(()=>{l.value=!1},3e3)),d?.error&&(c.value="destructive",k.value=d.error,l.value=!0,setTimeout(()=>{l.value=!1},3e3))},{deep:!0}),(d,t)=>(m(),y(G,null,[s(e(ne),{title:"Groups"}),s(ue,{"enter-active-class":"transition ease-out duration-300","enter-from-class":"opacity-0 translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition ease-in duration-200","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 translate-y-2"},{default:a(()=>[l.value?(m(),S(ce,{key:0,variant:c.value,position:"top-right"},{default:a(()=>[o(f(k.value),1)]),_:1},8,["variant"])):$("",!0)]),_:1}),s(ie,{breadcrumbs:g},{default:a(()=>[u("div",Ce,[u("div",De,[t[6]||(t[6]=u("h2",{class:"text-2xl font-bold"},"Client Groups",-1)),s(e(x),{onClick:W},{default:a(()=>[...t[5]||(t[5]=[o("Add Group",-1)])]),_:1})]),u("div",Ve,[s(e(_e),{class:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),s(e(B),{modelValue:D.value,"onUpdate:modelValue":t[0]||(t[0]=r=>D.value=r),onInput:te,type:"search",placeholder:"Search groups...",class:"pl-9"},null,8,["modelValue"])]),u("div",Ge,[s(e(ge),null,{default:a(()=>[s(e(ve),null,{default:a(()=>[s(e(F),null,{default:a(()=>[s(e(me),{"sort-key":"name","current-sort":i.filters?.sort,"current-direction":i.filters?.direction,onSort:se},{default:a(()=>[...t[7]||(t[7]=[o(" Name ",-1)])]),_:1},8,["current-sort","current-direction"]),s(e(h),null,{default:a(()=>[...t[8]||(t[8]=[o("Slug",-1)])]),_:1}),s(e(h),null,{default:a(()=>[...t[9]||(t[9]=[o("Status",-1)])]),_:1}),s(e(h),{class:"text-right"},{default:a(()=>[...t[10]||(t[10]=[o("Actions",-1)])]),_:1})]),_:1})]),_:1}),s(e(fe),null,{default:a(()=>[i.groups.data.length===0?(m(),S(e(F),{key:0},{default:a(()=>[s(e(C),{colspan:"4",class:"text-center text-muted-foreground"},{default:a(()=>[...t[11]||(t[11]=[o(" No groups found. Add your first group to get started. ",-1)])]),_:1})]),_:1})):$("",!0),(m(!0),y(G,null,P(i.groups.data,r=>(m(),S(e(F),{key:r.id},{default:a(()=>[s(e(C),{class:"font-medium"},{default:a(()=>[o(f(r.name??"-"),1)]),_:2},1024),s(e(C),{class:"font-mono text-sm"},{default:a(()=>[o(f(r.slug??"-"),1)]),_:2},1024),s(e(C),null,{default:a(()=>[u("span",{class:E(["inline-flex items-center rounded-full px-2 py-1 text-xs font-medium",r.active?"bg-green-50 text-green-700 ring-1 ring-inset ring-green-600/20":"bg-gray-50 text-gray-600 ring-1 ring-inset ring-gray-500/10"])},f(r.active?"Active":"Inactive"),3)]),_:2},1024),s(e(C),{class:"text-right"},{default:a(()=>[u("div",Te,[s(e(x),{variant:"outline",size:"sm",onClick:H=>X(r)},{default:a(()=>[...t[12]||(t[12]=[o(" Edit ",-1)])]),_:1},8,["onClick"]),s(e(x),{variant:"destructive",size:"sm",onClick:H=>Y(r)},{default:a(()=>[...t[13]||(t[13]=[o(" Delete ",-1)])]),_:1},8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1})]),_:1})]),i.groups.last_page>1?(m(),y("div",Ue,[u("div",Ae," Showing "+f((i.groups.current_page-1)*i.groups.per_page+1)+" to "+f(Math.min(i.groups.current_page*i.groups.per_page,i.groups.total))+" of "+f(i.groups.total)+" groups ",1),u("div",ze,[(m(!0),y(G,null,P(i.groups.links,r=>(m(),S(e(x),{key:r.label,variant:r.active?"default":"outline",size:"sm",disabled:!r.url,onClick:H=>ee(r.url),innerHTML:r.label},null,8,["variant","disabled","onClick","innerHTML"]))),128))])])):$("",!0),s(e(A),{open:n.value,"onUpdate:open":t[1]||(t[1]=r=>n.value=r)},{default:a(()=>[s(e(z),{class:"max-w-2xl"},{default:a(()=>[s(e(M),null,{default:a(()=>[s(e(N),null,{default:a(()=>[...t[14]||(t[14]=[o("Add New Group",-1)])]),_:1}),s(e(j),null,{default:a(()=>[...t[15]||(t[15]=[o(" Create a new client group. ",-1)])]),_:1})]),_:1}),s(Q,{group:R,"submit-url":"/admin/groups",method:"post",onSuccess:q})]),_:1})]),_:1},8,["open"]),s(e(A),{open:p.value,"onUpdate:open":t[2]||(t[2]=r=>p.value=r)},{default:a(()=>[s(e(z),{class:"max-w-2xl"},{default:a(()=>[s(e(M),null,{default:a(()=>[s(e(N),null,{default:a(()=>[...t[16]||(t[16]=[o("Edit Group",-1)])]),_:1}),s(e(j),null,{default:a(()=>[...t[17]||(t[17]=[o(" Update the group information. ",-1)])]),_:1})]),_:1}),v.value?(m(),S(Q,{key:0,group:v.value,"submit-url":`/admin/groups/${v.value.id}`,method:"put",onSuccess:q},null,8,["group","submit-url"])):$("",!0)]),_:1})]),_:1},8,["open"]),s(e(A),{open:w.value,"onUpdate:open":t[4]||(t[4]=r=>w.value=r)},{default:a(()=>[s(e(z),null,{default:a(()=>[s(e(M),{class:"space-y-3"},{default:a(()=>[s(e(N),null,{default:a(()=>[...t[18]||(t[18]=[o("Delete Group",-1)])]),_:1}),s(e(j),null,{default:a(()=>[t[19]||(t[19]=o(" Are you sure you want to delete ",-1)),u("strong",null,f(v.value?.name),1),t[20]||(t[20]=o("? This action cannot be undone. ",-1))]),_:1})]),_:1}),u("div",Me,[s(e(x),{type:"button",variant:"secondary",onClick:t[3]||(t[3]=r=>w.value=!1)},{default:a(()=>[...t[21]||(t[21]=[o(" Cancel ",-1)])]),_:1}),s(e(x),{variant:"destructive",disabled:e(L).processing,onClick:Z},{default:a(()=>[...t[22]||(t[22]=[o(" Delete Group ",-1)])]),_:1},8,["disabled"])])]),_:1})]),_:1},8,["open"])])]),_:1})],64))}});export{Oe as default};
