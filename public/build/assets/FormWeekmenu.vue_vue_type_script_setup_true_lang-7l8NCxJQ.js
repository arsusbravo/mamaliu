import{c as Y,_ as $}from"./index-COZ9yg7p.js";import{d as F,j as q,k as C,c as d,a as o,b as r,f as y,u as e,w as u,g as _,G as b,t as m,F as N,r as W,e as U,o as a,q as j,s as D}from"./app-DujlMToZ.js";import{_ as w,a as h}from"./Label.vue_vue_type_script_setup_true_lang-DMcM0mYD.js";import{_ as B,a as I,b as L,c as T,d as M}from"./SelectValue.vue_vue_type_script_setup_true_lang-DDVscWms.js";import{_ as z}from"./DialogFooter.vue_vue_type_script_setup_true_lang-kLBKUySP.js";import{I as S}from"./image-off-NVRcu-dQ.js";import{C as G}from"./check-CTUvkM7p.js";const Ne=Y("FilterIcon",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),O={class:"grid gap-2"},Q={key:0,class:"flex items-center gap-3 flex-1"},E={key:0,class:"w-10 h-10 rounded overflow-hidden shrink-0"},A=["src","alt"],H={key:1,class:"w-10 h-10 rounded bg-gray-100 flex items-center justify-center shrink-0"},J={class:"flex-1 min-w-0"},K={class:"font-medium truncate"},P={class:"text-xs text-muted-foreground"},R={key:1,class:"text-muted-foreground"},X={key:0,class:"relative"},Z={class:"absolute z-50 w-full mt-1 bg-background border rounded-md shadow-lg"},ee={class:"p-2 border-b"},te={class:"max-h-64 overflow-y-auto"},se={class:"p-1"},re=["onClick"],oe={key:0,class:"w-12 h-12 rounded overflow-hidden shrink-0"},ae=["src","alt"],le={key:1,class:"w-12 h-12 rounded bg-gray-100 flex items-center justify-center shrink-0"},ne={class:"flex-1 text-left min-w-0"},de={class:"font-medium truncate"},ue={class:"text-sm text-muted-foreground"},ie={key:0,class:"p-4 text-center text-muted-foreground"},me={key:1,class:"text-sm text-red-500"},ce=F({__name:"MenuSelector",props:{menus:{},modelValue:{},error:{}},emits:["update:modelValue"],setup(c,{emit:V}){const l=c,x=V,p=q(""),t=q(!1),f=C(()=>l.menus.find(v=>String(v.id)===l.modelValue)),g=C(()=>{if(!p.value)return l.menus;const v=p.value.toLowerCase();return l.menus.filter(k=>k.label.toLowerCase().includes(v))}),s=v=>{x("update:modelValue",String(v)),t.value=!1,p.value=""},n=()=>{t.value=!t.value,t.value&&(p.value="")};return(v,k)=>(a(),d("div",O,[o(e(w),null,{default:u(()=>[...k[1]||(k[1]=[_("Menu *",-1)])]),_:1}),r("button",{type:"button",onClick:n,class:b(["flex items-center gap-3 w-full px-3 py-2 text-left border rounded-md bg-background hover:bg-accent",c.error?"border-red-500":"border-input"])},[f.value?(a(),d("div",Q,[f.value.has_image&&f.value.image_url?(a(),d("div",E,[r("img",{src:f.value.image_url,alt:f.value.label,class:"w-full h-full object-cover"},null,8,A)])):(a(),d("div",H,[o(e(S),{class:"h-5 w-5 text-gray-400"})])),r("div",J,[r("div",K,m(f.value.label),1),r("div",P,"€"+m(Number(f.value.price).toFixed(2)),1)])])):(a(),d("span",R,"Select a menu")),k[2]||(k[2]=r("svg",{class:"w-4 h-4 ml-auto shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 9l-7 7-7-7"})],-1))],2),t.value?(a(),d("div",X,[r("div",Z,[r("div",ee,[o(e(h),{modelValue:p.value,"onUpdate:modelValue":k[0]||(k[0]=i=>p.value=i),type:"text",placeholder:"Search menus...",class:"w-full"},null,8,["modelValue"])]),r("div",te,[r("div",se,[(a(!0),d(N,null,W(g.value,i=>(a(),d("button",{key:i.id,type:"button",onClick:he=>s(i.id),class:"flex items-center gap-3 w-full px-3 py-2 rounded hover:bg-accent transition-colors"},[i.has_image&&i.image_url?(a(),d("div",oe,[r("img",{src:i.image_url,alt:i.label,class:"w-full h-full object-cover"},null,8,ae)])):(a(),d("div",le,[o(e(S),{class:"h-6 w-6 text-gray-400"})])),r("div",ne,[r("div",de,m(i.label),1),r("div",ue,"€"+m(Number(i.price).toFixed(2)),1)]),String(i.id)===c.modelValue?(a(),U(e(G),{key:2,class:"w-4 h-4 text-primary shrink-0"})):y("",!0)],8,re))),128)),g.value.length===0?(a(),d("div",ie," No menus found ")):y("",!0)])])])])):y("",!0),c.error?(a(),d("span",me,m(c.error),1)):y("",!0)]))}}),fe={class:"grid gap-4"},_e={class:"grid grid-cols-2 gap-4"},pe={class:"grid gap-2"},ge={key:0,class:"text-sm text-red-500"},ve={class:"grid gap-2"},ke={key:0,class:"text-sm text-red-500"},ye={class:"grid gap-2"},be={key:0,class:"text-sm text-red-500"},we={class:"grid gap-2"},xe={key:0,class:"text-sm text-red-500"},We=F({__name:"FormWeekmenu",props:{weekmenu:{default:void 0},menus:{},groups:{},currentWeek:{default:void 0},currentYear:{default:void 0},defaultWeek:{default:void 0},defaultYear:{default:void 0},submitUrl:{},method:{}},emits:["success","cancel"],setup(c,{emit:V}){const l=c,x=V,p=()=>{const g=new Date,s=new Date(g.getFullYear(),0,1),n=g.getTime()-s.getTime(),v=1e3*60*60*24*7;return Math.ceil(n/v)},t=j({week:l.weekmenu?.week||l.defaultWeek||l.currentWeek||p(),year:l.weekmenu?.year||l.defaultYear||l.currentYear||new Date().getFullYear(),group_id:l.weekmenu?.group_id?String(l.weekmenu.group_id):"",menu_id:l.weekmenu?.menu_id?String(l.weekmenu.menu_id):"",quantity:l.weekmenu?.quantity||1}),f=()=>{const g=l.method==="post"?"post":"put",s={...t.data(),group_id:t.group_id?Number(t.group_id):null,menu_id:t.menu_id?Number(t.menu_id):null};t.transform(()=>s)[g](l.submitUrl,{onSuccess:()=>{x("success"),t.reset()}})};return(g,s)=>(a(),d("form",{onSubmit:D(f,["prevent"]),class:"space-y-4"},[r("div",fe,[r("div",_e,[r("div",pe,[o(e(w),{for:"week"},{default:u(()=>[...s[6]||(s[6]=[_("Week *",-1)])]),_:1}),o(e(h),{id:"week",modelValue:e(t).week,"onUpdate:modelValue":s[0]||(s[0]=n=>e(t).week=n),modelModifiers:{number:!0},type:"number",min:"1",max:"53",required:"",class:b({"border-red-500":e(t).errors.week})},null,8,["modelValue","class"]),e(t).errors.week?(a(),d("span",ge,m(e(t).errors.week),1)):y("",!0)]),r("div",ve,[o(e(w),{for:"year"},{default:u(()=>[...s[7]||(s[7]=[_("Year *",-1)])]),_:1}),o(e(h),{id:"year",modelValue:e(t).year,"onUpdate:modelValue":s[1]||(s[1]=n=>e(t).year=n),modelModifiers:{number:!0},type:"number",min:"2020",max:"2100",required:"",class:b({"border-red-500":e(t).errors.year})},null,8,["modelValue","class"]),e(t).errors.year?(a(),d("span",ke,m(e(t).errors.year),1)):y("",!0)])]),r("div",ye,[o(e(w),{for:"group"},{default:u(()=>[...s[8]||(s[8]=[_("Group *",-1)])]),_:1}),o(e(B),{modelValue:e(t).group_id,"onUpdate:modelValue":s[2]||(s[2]=n=>e(t).group_id=n),required:""},{default:u(()=>[o(e(I),{id:"group",class:b({"border-red-500":e(t).errors.group_id})},{default:u(()=>[o(e(L),{placeholder:"Select a group"})]),_:1},8,["class"]),o(e(T),null,{default:u(()=>[(a(!0),d(N,null,W(c.groups,n=>(a(),U(e(M),{key:n.id,value:String(n.id)},{default:u(()=>[_(m(n.name),1)]),_:2},1032,["value"]))),128)),o(e(M),{value:null},{default:u(()=>[...s[9]||(s[9]=[_(" No location ",-1)])]),_:1})]),_:1})]),_:1},8,["modelValue"]),e(t).errors.group_id?(a(),d("span",be,m(e(t).errors.group_id),1)):y("",!0)]),o(ce,{menus:c.menus,modelValue:e(t).menu_id,"onUpdate:modelValue":s[3]||(s[3]=n=>e(t).menu_id=n),error:e(t).errors.menu_id},null,8,["menus","modelValue","error"]),r("div",we,[o(e(w),{for:"quantity"},{default:u(()=>[...s[10]||(s[10]=[_("Quantity *",-1)])]),_:1}),o(e(h),{id:"quantity",modelValue:e(t).quantity,"onUpdate:modelValue":s[4]||(s[4]=n=>e(t).quantity=n),modelModifiers:{number:!0},type:"number",min:"1",required:"",class:b({"border-red-500":e(t).errors.quantity})},null,8,["modelValue","class"]),e(t).errors.quantity?(a(),d("span",xe,m(e(t).errors.quantity),1)):y("",!0)])]),o(e(z),{class:"gap-2"},{default:u(()=>[o(e($),{type:"button",variant:"secondary",onClick:s[5]||(s[5]=n=>x("cancel"))},{default:u(()=>[...s[11]||(s[11]=[_(" Cancel ",-1)])]),_:1}),o(e($),{type:"submit",disabled:e(t).processing},{default:u(()=>[_(m(c.method==="post"?"Create Week Menu":"Update Week Menu"),1)]),_:1},8,["disabled"])]),_:1})],32))}});export{Ne as F,We as _};
